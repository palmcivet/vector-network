function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/browserAll-DQuq1onv.js","assets/webworkerAll-D78yVGWs.js","assets/colorToUniform-DMqhVWWI.js","assets/CanvasPool-CHCBO5uV.js","assets/batchSamplersUniformGroup-BHYQQvaj.js","assets/WebGPURenderer-lyM9mhaa.js","assets/SharedSystems-Bx3mXfBj.js","assets/WebGLRenderer-N8rVeROe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Rr=Object.defineProperty;var Br=(s,t,e)=>t in s?Rr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Ye=(s,t,e)=>(Br(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const Lr=(s,t)=>s===t,Os={equals:Lr};let vi=Ti;const _t=1,Me=2,Ai={owned:null,cleanups:null,context:null,owner:null};var $=null;let $e=null,Fr=null,U=null,j=null,dt=null,Le=0;function Dr(s,t){const e=U,i=$,r=s.length===0,n=t===void 0?i:t,o=r?Ai:{owned:null,cleanups:null,context:n?n.context:null,owner:n},a=r?s:()=>s(()=>Yt(()=>De(o)));$=o,U=null;try{return he(a,!0)}finally{U=e,$=i}}function Gr(s,t){t=t?Object.assign({},Os,t):Os;const e={value:s,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(e.value)),Si(e,r));return[Or.bind(e),i]}function Se(s,t,e){const i=Pi(s,t,!1,_t);Fe(i)}function Nr(s,t,e){vi=Hr;const i=Pi(s,t,!1,_t);(!e||!e.render)&&(i.user=!0),dt?dt.push(i):Fe(i)}function Yt(s){if(U===null)return s();const t=U;U=null;try{return s()}finally{U=t}}function Mi(s){Nr(()=>Yt(s))}function Ur(s){return $===null||($.cleanups===null?$.cleanups=[s]:$.cleanups.push(s)),s}function Or(){if(this.sources&&this.state)if(this.state===_t)Fe(this);else{const s=j;j=null,he(()=>Te(this),!1),j=s}if(U){const s=this.observers?this.observers.length:0;U.sources?(U.sources.push(this),U.sourceSlots.push(s)):(U.sources=[this],U.sourceSlots=[s]),this.observers?(this.observers.push(U),this.observerSlots.push(U.sources.length-1)):(this.observers=[U],this.observerSlots=[U.sources.length-1])}return this.value}function Si(s,t,e){let i=s.value;return(!s.comparator||!s.comparator(i,t))&&(s.value=t,s.observers&&s.observers.length&&he(()=>{for(let r=0;r<s.observers.length;r+=1){const n=s.observers[r],o=$e&&$e.running;o&&$e.disposed.has(n),(o?!n.tState:!n.state)&&(n.pure?j.push(n):dt.push(n),n.observers&&ki(n)),o||(n.state=_t)}if(j.length>1e6)throw j=[],new Error},!1)),t}function Fe(s){if(!s.fn)return;De(s);const t=Le;Yr(s,s.value,t)}function Yr(s,t,e){let i;const r=$,n=U;U=$=s;try{i=s.fn(t)}catch(o){return s.pure&&(s.state=_t,s.owned&&s.owned.forEach(De),s.owned=null),s.updatedAt=e+1,Ii(o)}finally{U=n,$=r}(!s.updatedAt||s.updatedAt<=e)&&(s.updatedAt!=null&&"observers"in s?Si(s,i):s.value=i,s.updatedAt=e)}function Pi(s,t,e,i=_t,r){const n={fn:s,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:$,context:$?$.context:null,pure:e};return $===null||$!==Ai&&($.owned?$.owned.push(n):$.owned=[n]),n}function Pe(s){if(s.state===0)return;if(s.state===Me)return Te(s);if(s.suspense&&Yt(s.suspense.inFallback))return s.suspense.effects.push(s);const t=[s];for(;(s=s.owner)&&(!s.updatedAt||s.updatedAt<Le);)s.state&&t.push(s);for(let e=t.length-1;e>=0;e--)if(s=t[e],s.state===_t)Fe(s);else if(s.state===Me){const i=j;j=null,he(()=>Te(s,t[0]),!1),j=i}}function he(s,t){if(j)return s();let e=!1;t||(j=[]),dt?e=!0:dt=[],Le++;try{const i=s();return $r(e),i}catch(i){e||(dt=null),j=null,Ii(i)}}function $r(s){if(j&&(Ti(j),j=null),s)return;const t=dt;dt=null,t.length&&he(()=>vi(t),!1)}function Ti(s){for(let t=0;t<s.length;t++)Pe(s[t])}function Hr(s){let t,e=0;for(t=0;t<s.length;t++){const i=s[t];i.user?s[e++]=i:Pe(i)}for(t=0;t<e;t++)Pe(s[t])}function Te(s,t){s.state=0;for(let e=0;e<s.sources.length;e+=1){const i=s.sources[e];if(i.sources){const r=i.state;r===_t?i!==t&&(!i.updatedAt||i.updatedAt<Le)&&Pe(i):r===Me&&Te(i,t)}}}function ki(s){for(let t=0;t<s.observers.length;t+=1){const e=s.observers[t];e.state||(e.state=Me,e.pure?j.push(e):dt.push(e),e.observers&&ki(e))}}function De(s){let t;if(s.sources)for(;s.sources.length;){const e=s.sources.pop(),i=s.sourceSlots.pop(),r=e.observers;if(r&&r.length){const n=r.pop(),o=e.observerSlots.pop();i<r.length&&(n.sourceSlots[o]=i,r[i]=n,e.observerSlots[i]=o)}}if(s.owned){for(t=s.owned.length-1;t>=0;t--)De(s.owned[t]);s.owned=null}if(s.cleanups){for(t=s.cleanups.length-1;t>=0;t--)s.cleanups[t]();s.cleanups=null}s.state=0}function zr(s){return s instanceof Error?s:new Error(typeof s=="string"?s:"Unknown error",{cause:s})}function Ii(s,t=$){throw zr(s)}function st(s,t){return Yt(()=>s(t||{}))}function Xr(s,t,e){let i=e.length,r=t.length,n=i,o=0,a=0,h=t[r-1].nextSibling,c=null;for(;o<r||a<n;){if(t[o]===e[a]){o++,a++;continue}for(;t[r-1]===e[n-1];)r--,n--;if(r===o){const l=n<i?a?e[a-1].nextSibling:e[n-a]:h;for(;a<n;)s.insertBefore(e[a++],l)}else if(n===a)for(;o<r;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===e[n-1]&&e[a]===t[r-1]){const l=t[--r].nextSibling;s.insertBefore(e[a++],t[o++].nextSibling),s.insertBefore(e[--n],l),t[r]=e[n]}else{if(!c){c=new Map;let u=a;for(;u<n;)c.set(e[u],u++)}const l=c.get(t[o]);if(l!=null)if(a<l&&l<n){let u=o,d=1,p;for(;++u<r&&u<n&&!((p=c.get(t[u]))==null||p!==l+d);)d++;if(d>l-a){const f=t[o];for(;a<l;)s.insertBefore(e[a++],f)}else s.replaceChild(e[a++],t[o++])}else o++;else t[o++].remove()}}}const Ys="_$DX_DELEGATE";function Vr(s,t,e,i={}){let r;return Dr(n=>{r=n,t===document?s():lt(t,s(),t.firstChild?null:void 0,e)},i.owner),()=>{r(),t.textContent=""}}function et(s,t,e){let i;const r=()=>{const o=document.createElement("template");return o.innerHTML=s,e?o.content.firstChild.firstChild:o.content.firstChild},n=t?()=>Yt(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return n.cloneNode=n,n}function Wr(s,t=window.document){const e=t[Ys]||(t[Ys]=new Set);for(let i=0,r=s.length;i<r;i++){const n=s[i];e.has(n)||(e.add(n),t.addEventListener(n,jr))}}function Ae(s,t,e){e==null?s.removeAttribute(t):s.setAttribute(t,e)}function qr(s,t,e){return Yt(()=>s(t,e))}function lt(s,t,e,i){if(e!==void 0&&!i&&(i=[]),typeof t!="function")return ke(s,t,i,e);Se(r=>ke(s,t(),r,e),i)}function jr(s){const t=`$$${s.type}`;let e=s.composedPath&&s.composedPath()[0]||s.target;for(s.target!==e&&Object.defineProperty(s,"target",{configurable:!0,value:e}),Object.defineProperty(s,"currentTarget",{configurable:!0,get(){return e||document}});e;){const i=e[t];if(i&&!e.disabled){const r=e[`${t}Data`];if(r!==void 0?i.call(e,r,s):i.call(e,s),s.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function ke(s,t,e,i,r){for(;typeof e=="function";)e=e();if(t===e)return e;const n=typeof t,o=i!==void 0;if(s=o&&e[0]&&e[0].parentNode||s,n==="string"||n==="number")if(n==="number"&&(t=t.toString()),o){let a=e[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),e=Lt(s,e,i,a)}else e!==""&&typeof e=="string"?e=s.firstChild.data=t:e=s.textContent=t;else if(t==null||n==="boolean")e=Lt(s,e,i);else{if(n==="function")return Se(()=>{let a=t();for(;typeof a=="function";)a=a();e=ke(s,a,e,i)}),()=>e;if(Array.isArray(t)){const a=[],h=e&&Array.isArray(e);if(as(a,t,e,r))return Se(()=>e=ke(s,a,e,i,!0)),()=>e;if(a.length===0){if(e=Lt(s,e,i),o)return e}else h?e.length===0?$s(s,a,i):Xr(s,e,a):(e&&Lt(s),$s(s,a));e=a}else if(t.nodeType){if(Array.isArray(e)){if(o)return e=Lt(s,e,i,t);Lt(s,e,null,t)}else e==null||e===""||!s.firstChild?s.appendChild(t):s.replaceChild(t,s.firstChild);e=t}}return e}function as(s,t,e,i){let r=!1;for(let n=0,o=t.length;n<o;n++){let a=t[n],h=e&&e[s.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)s.push(a);else if(Array.isArray(a))r=as(s,a,h)||r;else if(c==="function")if(i){for(;typeof a=="function";)a=a();r=as(s,Array.isArray(a)?a:[a],Array.isArray(h)?h:[h])||r}else s.push(a),r=!0;else{const l=String(a);h&&h.nodeType===3&&h.data===l?s.push(h):s.push(document.createTextNode(l))}}return r}function $s(s,t,e=null){for(let i=0,r=t.length;i<r;i++)s.insertBefore(t[i],e)}function Lt(s,t,e,i){if(e===void 0)return s.textContent="";const r=i||document.createTextNode("");if(t.length){let n=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(r!==a){const h=a.parentNode===s;!n&&!o?h?s.replaceChild(r,a):s.insertBefore(r,e):h&&a.remove()}else n=!0}}else s.insertBefore(r,e);return[r]}var Zr=et('<a class=github-corner aria-label="View source on GitHub"target=_blank><svg viewBox="0 0 250 250"style=fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0; aria-hidden=true><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"fill=currentColor style="transform-origin:130px 106px;"class=octo-arm></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"fill=currentColor class=octo-body>');const Kr=({url:s,size:t=60})=>(()=>{var e=Zr(),i=e.firstChild;return Ae(e,"href",s),Ae(i,"width",t),Ae(i,"height",t),e})();var Qr=et('<div class="sc-container shadow-sm"><div class=relative><div class="flex w-full justify-center items-center py-4"><span class="font-extrabold text-2xl px-4">Figma Vector Network</span><span><code class="rounded-md bg-cyan px-2 py-1 text-sm">v');function Jr(){return(()=>{var s=Qr(),t=s.firstChild,e=t.firstChild,i=e.firstChild,r=i.nextSibling,n=r.firstChild;return n.firstChild,lt(n,"0.0.0",null),lt(t,st(Kr,{url:"https://github.com/palmcivet/vector-network"}),null),s})()}var tn=et('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 40 40"width=40 height=40><path fill-rule=evenodd clip-rule=evenodd d="M13.6656 12.4799L26.8715 20.463L20.5248 22.1855L16.8227 27.7786L13.6656 12.4799ZM15.1078 14.5202L17.3161 25.2214L19.899 21.3192L24.3545 20.1099L15.1078 14.5202Z"fill-opacity=.9>'),en=et('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 40 40"width=40 height=40><path fill-rule=evenodd clip-rule=evenodd d="M21.1219 15.6407L21.1103 15.6374L14.4437 13.7366L19.3533 18.6462C19.5491 18.5525 19.7684 18.5 20 18.5C20.8284 18.5 21.5 19.1716 21.5 20C21.5 20.8284 20.8284 21.5 20 21.5C19.1716 21.5 18.5 20.8284 18.5 20C18.5 19.7684 18.5525 19.5491 18.6462 19.3533L13.7425 14.4496L15.5745 20.8403L15.585 20.8768L15.5927 20.914C16.0146 22.9612 17.8287 24.5 20 24.5C20.4945 24.5 20.9685 24.4206 21.411 24.2746L21.9959 24.0817L22.4314 24.5172L24.2782 26.364L26.3995 24.2426L24.5346 22.3777L24.1041 21.9472L24.2888 21.3672C24.4257 20.9373 24.5 20.4783 24.5 20C24.5 17.9074 23.0707 16.1461 21.1335 15.6437L21.1219 15.6407ZM27.1066 23.5355L27.8137 24.2426L27.1066 24.9497L24.9853 27.0711L24.2782 27.7782L23.5711 27.0711L21.7243 25.2243C21.1819 25.4032 20.6023 25.5 20 25.5C17.3448 25.5 15.129 23.6184 14.6133 21.1159L12.3246 13.1324L12 12L13.1329 12.323L21.3845 14.6758C23.7519 15.2896 25.5 17.4407 25.5 20C25.5 20.5825 25.4095 21.1438 25.2417 21.6706L27.1066 23.5355Z"fill-opacity=.9>'),sn=et('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 40 40"width=40 height=40><path fill-rule=evenodd clip-rule=evenodd d="M17.0142 27.4907L17.3111 27.4313L17.5252 27.2173L25.7678 18.9746L26.4749 18.2675L28.1317 16.6107C28.9128 15.8296 28.9128 14.5633 28.1317 13.7822L26.7175 12.368C25.9365 11.587 24.6702 11.587 23.8891 12.368L22.2322 14.0249L21.5251 14.732L13.2825 22.9746L13.0684 23.1887L13.0091 23.4856L12.302 27.0211L12.0078 28.492L13.4786 28.1978L17.0142 27.4907ZM22.2322 15.4391L13.9896 23.6817L13.495 26.155L13.2825 27.2173L14.3448 27.0048L16.8181 26.5101L25.0607 18.2675L22.2322 15.4391ZM22.9393 14.732L25.7678 17.5604L27.4246 15.9035C27.8152 15.513 27.8152 14.8799 27.4246 14.4893L26.0104 13.0751C25.6199 12.6846 24.9867 12.6846 24.5962 13.0751L22.9393 14.732Z"fill-opacity=.9>'),rn=et('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 40 40"width=40 height=40><path fill-rule=evenodd clip-rule=evenodd d="M25.5 16C26.3284 16 27 15.3284 27 14.5C27 13.6716 26.3284 13 25.5 13C24.6716 13 24 13.6716 24 14.5C24 15.3284 24.6716 16 25.5 16ZM25.5 17C26.8807 17 28 15.8807 28 14.5C28 13.1193 26.8807 12 25.5 12C24.2905 12 23.2816 12.8589 23.05 14H22.5C17.8056 14 14 17.8056 14 22.5V23.05C12.8589 23.2816 12 24.2905 12 25.5C12 26.8807 13.1193 28 14.5 28C15.8807 28 17 26.8807 17 25.5C17 24.2905 16.1411 23.2816 15 23.05V22.5C15 18.3579 18.3579 15 22.5 15H23.05C23.2816 16.1411 24.2905 17 25.5 17ZM14.5 27C15.3284 27 16 26.3284 16 25.5C16 24.6716 15.3284 24 14.5 24C13.6716 24 13 24.6716 13 25.5C13 26.3284 13.6716 27 14.5 27Z"fill-opacity=.9>'),nn=et('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 40 40"width=40 height=40><path fill-rule=evenodd clip-rule=evenodd d="M11.8682 19.6465L11.5146 20.0001L11.8682 20.3536L19.6464 28.1318L19.9999 28.4853L20.3535 28.1318L28.1317 20.3536L28.4852 20.0001L28.1317 19.6465L20.3535 11.8683L19.9999 11.5148L19.6464 11.8683L11.8682 19.6465ZM12.9289 20.0001H27.071L19.9999 12.929L12.9289 20.0001Z"fill-opacity=.9>');const on=()=>tn(),an=()=>en(),hn=()=>sn(),ln=()=>rn(),cn=()=>nn();var un=et('<div class="flex justify-center flex-row gap-2">'),dn=et('<div role=button class="rounded-lg border border-gray-300 bg-white text-center text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-100 focus:ring focus:ring-gray-100 disabled:cursor-not-allowed disabled:border-gray-100 disabled:bg-gray-50 disabled:text-gray-400">');const fn={Move:st(on,{}),Pen:st(an,{}),Pencil:st(hn,{}),Bend:st(ln,{}),Paint:st(cn,{})};function pn(){return(()=>{var s=un();return lt(s,()=>Object.entries(fn).map(([t,e])=>(()=>{var i=dn();return i.$$click=()=>t,lt(i,e),i})())),s})()}Wr(["click"]);const mn="modulepreload",gn=function(s){return"/"+s},Hs={},Ie=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){const n=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.all(e.map(h=>{if(h=gn(h),h in Hs)return;Hs[h]=!0;const c=h.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!i)for(let p=n.length-1;p>=0;p--){const f=n[p];if(f.href===h&&(!c||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${l}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":mn,c||(d.as="script",d.crossOrigin=""),d.href=h,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${h}`)))})}))}return r.then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};var H=(s=>(s.Application="application",s.WebGLPipes="webgl-pipes",s.WebGLPipesAdaptor="webgl-pipes-adaptor",s.WebGLSystem="webgl-system",s.WebGPUPipes="webgpu-pipes",s.WebGPUPipesAdaptor="webgpu-pipes-adaptor",s.WebGPUSystem="webgpu-system",s.CanvasSystem="canvas-system",s.CanvasPipesAdaptor="canvas-pipes-adaptor",s.CanvasPipes="canvas-pipes",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s.MaskEffect="mask-effect",s.BlendMode="blend-mode",s.TextureSource="texture-source",s.Environment="environment",s))(H||{});const hs=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},de=(s,t)=>hs(s).priority??t,Bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(hs).forEach(t=>{t.type.forEach(e=>{var i,r;return(r=(i=this._removeHandlers)[e])==null?void 0:r.call(i,t)})}),this},add(...s){return s.map(hs).forEach(t=>{t.type.forEach(e=>{var n,o;const i=this._addHandlers,r=this._queue;i[e]?(o=i[e])==null||o.call(i,t):(r[e]=r[e]||[],(n=r[e])==null||n.push(t))})}),this},handle(s,t,e){var o;const i=this._addHandlers,r=this._removeHandlers;if(i[s]||r[s])throw new Error(`Extension type ${s} already has a handler`);i[s]=t,r[s]=e;const n=this._queue;return n[s]&&((o=n[s])==null||o.forEach(a=>t(a)),delete n[s]),this},handleByMap(s,t){return this.handle(s,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(s,t,e=-1){return this.handle(s,i=>{t.findIndex(n=>n.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((n,o)=>de(o.value,e)-de(n.value,e)))},i=>{const r=t.findIndex(n=>n.name===i.name);r!==-1&&t.splice(r,1)})},handleByList(s,t,e=-1){return this.handle(s,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,n)=>de(n,e)-de(r,e)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})}},yn={extension:{type:H.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ie(()=>import("./browserAll-DQuq1onv.js"),__vite__mapDeps([0,1,2,3,4]))}},xn={extension:{type:H.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ie(()=>import("./webworkerAll-D78yVGWs.js"),__vite__mapDeps([1,2,3,4]))}};class J{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new J(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}function As(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ei={exports:{}};(function(s){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(h,c,l){this.fn=h,this.context=c,this.once=l||!1}function n(h,c,l,u,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new r(l,u||h,d),f=e?e+c:c;return h._events[f]?h._events[f].fn?h._events[f]=[h._events[f],p]:h._events[f].push(p):(h._events[f]=p,h._eventsCount++),h}function o(h,c){--h._eventsCount===0?h._events=new i:delete h._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},a.prototype.listeners=function(c){var l=e?e+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,p=u.length,f=new Array(p);d<p;d++)f[d]=u[d].fn;return f},a.prototype.listenerCount=function(c){var l=e?e+c:c,u=this._events[l];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,l,u,d,p,f){var g=e?e+c:c;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,y,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,p),!0;case 6:return m.fn.call(m.context,l,u,d,p,f),!0}for(x=1,y=new Array(_-1);x<_;x++)y[x-1]=arguments[x];m.fn.apply(m.context,y)}else{var b=m.length,M;for(x=0;x<b;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),_){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!y)for(M=1,y=new Array(_-1);M<_;M++)y[M-1]=arguments[M];m[x].fn.apply(m[x].context,y)}}return!0},a.prototype.on=function(c,l,u){return n(this,c,l,u,!1)},a.prototype.once=function(c,l,u){return n(this,c,l,u,!0)},a.prototype.removeListener=function(c,l,u,d){var p=e?e+c:c;if(!this._events[p])return this;if(!l)return o(this,p),this;var f=this._events[p];if(f.fn)f.fn===l&&(!d||f.once)&&(!u||f.context===u)&&o(this,p);else{for(var g=0,m=[],_=f.length;g<_;g++)(f[g].fn!==l||d&&!f[g].once||u&&f[g].context!==u)&&m.push(f[g]);m.length?this._events[p]=m.length===1?m[0]:m:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var l;return c?(l=e?e+c:c,this._events[l]&&o(this,l)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,s.exports=a})(Ei);var _n=Ei.exports;const gt=As(_n),bn=Math.PI*2,wn=180/Math.PI,Cn=Math.PI/180;class q{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new q(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return He.x=0,He.y=0,He}}const He=new q;class E{constructor(t=1,e=0,i=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new q;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new q;const i=this.a,r=this.b,n=this.c,o=this.d,a=this.tx,h=this.ty,c=1/(i*o+n*-r),l=t.x,u=t.y;return e.x=o*c*l+-n*c*u+(h*n-a*o)*c,e.y=i*c*u+-r*c*l+(-h*i+a*r)*c,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}appendFrom(t,e){const i=t.a,r=t.b,n=t.c,o=t.d,a=t.tx,h=t.ty,c=e.a,l=e.b,u=e.c,d=e.d;return this.a=i*c+r*u,this.b=i*l+r*d,this.c=n*c+o*u,this.d=n*l+o*d,this.tx=a*c+h*u+e.tx,this.ty=a*l+h*d+e.ty,this}setTransform(t,e,i,r,n,o,a,h,c){return this.a=Math.cos(a+c)*n,this.b=Math.sin(a+c)*n,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),h=Math.atan2(i,e),c=Math.abs(a+h);return c<1e-5||Math.abs(bn-c)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new E;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return An.identity()}static get shared(){return vn.identity()}}const vn=new E,An=new E,St=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Tt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],kt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ls=[],Ri=[],fe=Math.sign;function Mn(){for(let s=0;s<16;s++){const t=[];ls.push(t);for(let e=0;e<16;e++){const i=fe(St[s]*St[e]+Tt[s]*Pt[e]),r=fe(Pt[s]*St[e]+kt[s]*Pt[e]),n=fe(St[s]*Tt[e]+Tt[s]*kt[e]),o=fe(Pt[s]*Tt[e]+kt[s]*kt[e]);for(let a=0;a<16;a++)if(St[a]===i&&Pt[a]===r&&Tt[a]===n&&kt[a]===o){t.push(a);break}}}for(let s=0;s<16;s++){const t=new E;t.set(St[s],Pt[s],Tt[s],kt[s],0,0),Ri.push(t)}}Mn();const F={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>St[s],uY:s=>Pt[s],vX:s=>Tt[s],vY:s=>kt[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>ls[s][t],sub:(s,t)=>ls[s][F.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?F.S:F.N:Math.abs(t)*2<=Math.abs(s)?s>0?F.E:F.W:t>0?s>0?F.SE:F.SW:s>0?F.NE:F.NW,matrixAppendRotationInv:(s,t,e=0,i=0)=>{const r=Ri[F.inv(t)];r.tx=e,r.ty=i,s.append(r)}},pe=[new q,new q,new q,new q];class V{constructor(t=0,e=0,i=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new V(0,0,0,0)}clone(){return new V(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i){const{width:r,height:n}=this;if(r<=0||n<=0)return!1;const o=this.x,a=this.y,h=o-i/2,c=o+r+i/2,l=a-i/2,u=a+n+i/2,d=o+i/2,p=o+r-i/2,f=a+i/2,g=a+n-i/2;return t>=h&&t<=c&&e>=l&&e<=u&&!(t>d&&t<p&&e>f&&e<g)}intersects(t,e){if(!e){const A=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=A)return!1;const C=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>C}const i=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=i||o<=n)return!1;const a=pe[0].set(t.left,t.top),h=pe[1].set(t.left,t.bottom),c=pe[2].set(t.right,t.top),l=pe[3].set(t.right,t.bottom);if(c.x<=a.x||h.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(h,h),e.apply(c,c),e.apply(l,l),Math.max(a.x,h.x,c.x,l.x)<=i||Math.min(a.x,h.x,c.x,l.x)>=r||Math.max(a.y,h.y,c.y,l.y)<=n||Math.min(a.y,h.y,c.y,l.y)>=o))return!1;const d=u*(h.y-a.y),p=u*(a.x-h.x),f=d*i+p*n,g=d*r+p*n,m=d*i+p*o,_=d*r+p*o;if(Math.max(f,g,m,_)<=d*a.x+p*a.y||Math.min(f,g,m,_)>=d*l.x+p*l.y)return!1;const y=u*(a.y-c.y),x=u*(c.x-a.x),b=y*i+x*n,M=y*r+x*n,I=y*i+x*o,v=y*r+x*o;return!(Math.max(b,M,I,v)<=y*a.x+x*a.y||Math.min(b,M,I,v)>=y*l.x+x*l.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this}getBounds(t){return t=t||new V,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ze={default:-1};function W(s="default"){return ze[s]===void 0&&(ze[s]=-1),++ze[s]}const zs={},O="8.0.0";function Y(s,t,e=3){if(zs[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(i))),zs[t]=!0}const Bi=()=>{};function vh(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function Xs(s){return!(s&s-1)&&!!s}function Sn(s){const t={};for(const e in s)s[e]!==void 0&&(t[e]=s[e]);return t}const Vs=Object.create(null);function Pn(s){const t=Vs[s];return t===void 0&&(Vs[s]=W("resource")),t}const Li=class Fi extends gt{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Fi.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Y(O,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Pn(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Li.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Tn=Li;const Di=class Gi extends gt{constructor(t={}){super(),this.options=t,this.uid=W("textureSource"),this._resourceType="textureSource",this._resourceId=W("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Gi.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Tn(Sn(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=W("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i=i||this._resolution,t=t||this.width,e=e||this.height;const r=Math.round(t*i),n=Math.round(e*i);return this.width=r/i,this.height=n/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===n?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=W("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Xs(this.pixelWidth)&&Xs(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Di.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let bt=Di;class Ms extends bt{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Ms.extension=H.TextureSource;const Ws=new E;class kn{constructor(t,e){this.mapCoord=new E,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,r=t.trim;r&&(Ws.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Ws));const n=t.source,o=this.uClampFrame,a=this.clampMargin/n._resolution,h=this.clampOffset;return o[0]=(t.frame.x+a+h)/n.width,o[1]=(t.frame.y+a+h)/n.height,o[2]=(t.frame.x+t.frame.width-a+h)/n.width,o[3]=(t.frame.y+t.frame.height-a+h)/n.height,this.uClampOffset[0]=h/n.pixelWidth,this.uClampOffset[1]=h/n.pixelHeight,this.isSimple=t.frame.width===n.width&&t.frame.height===n.height&&t.rotate===0,!0}}class B extends gt{constructor({source:t,label:e,frame:i,orig:r,trim:n,defaultAnchor:o,defaultBorders:a,rotate:h,dynamic:c}={}){if(super(),this.uid=W("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new V,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new bt,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:l,height:u}=this._source;this.frame.width=l,this.frame.height=u}this.orig=r||this.frame,this.trim=n,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new kn(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:r}=this._source,n=e.x/i,o=e.y/r,a=e.width/i,h=e.height/r;let c=this.rotate;if(c){const l=a/2,u=h/2,d=n+l,p=o+u;c=F.add(c,F.NW),t.x0=d+l*F.uX(c),t.y0=p+u*F.uY(c),c=F.add(c,2),t.x1=d+l*F.uX(c),t.y1=p+u*F.uY(c),c=F.add(c,2),t.x2=d+l*F.uX(c),t.y2=p+u*F.uY(c),c=F.add(c,2),t.x3=d+l*F.uX(c),t.y3=p+u*F.uY(c)}else t.x0=n,t.y0=o,t.x1=n+a,t.y1=o,t.x2=n+a,t.y2=o+h,t.x3=n,t.y3=o+h}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Y(O,"Texture.baseTexture is now Texture.source"),this._source}}B.EMPTY=new B({label:"EMPTY",source:new bt({label:"EMPTY"})});B.EMPTY.destroy=Bi;B.WHITE=new B({source:new Ms({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});B.WHITE.destroy=Bi;function In(s,t,e,i){const{width:r,height:n}=e.orig,o=e.trim;if(o){const a=o.width,h=o.height;s.minX=o.x-t._x*r-i,s.maxX=s.minX+a,s.minY=o.y-t._y*n-i,s.maxY=s.minY+h}else s.minX=-t._x*r-i,s.maxX=s.minX+r,s.minY=-t._y*n-i,s.maxY=s.minY+n}var En={grad:.9,turn:360,rad:360/(2*Math.PI)},ut=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},X=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*s)/e+0},it=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),s>e?e:s>t?s:t},Ni=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},qs=function(s){return{r:it(s.r,0,255),g:it(s.g,0,255),b:it(s.b,0,255),a:it(s.a)}},Xe=function(s){return{r:X(s.r),g:X(s.g),b:X(s.b),a:X(s.a,3)}},Rn=/^#([0-9a-f]{3,8})$/i,me=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},Ui=function(s){var t=s.r,e=s.g,i=s.b,r=s.a,n=Math.max(t,e,i),o=n-Math.min(t,e,i),a=o?n===t?(e-i)/o:n===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},Oi=function(s){var t=s.h,e=s.s,i=s.v,r=s.a;t=t/360*6,e/=100,i/=100;var n=Math.floor(t),o=i*(1-e),a=i*(1-(t-n)*e),h=i*(1-(1-t+n)*e),c=n%6;return{r:255*[i,a,o,o,h,i][c],g:255*[h,i,i,a,o,o][c],b:255*[o,o,h,i,i,a][c],a:r}},js=function(s){return{h:Ni(s.h),s:it(s.s,0,100),l:it(s.l,0,100),a:it(s.a)}},Zs=function(s){return{h:X(s.h),s:X(s.s),l:X(s.l),a:X(s.a,3)}},Ks=function(s){return Oi((e=(t=s).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Jt=function(s){return{h:(t=Ui(s)).h,s:(r=(200-(e=t.s))*(i=t.v)/100)>0&&r<200?e*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,i,r},Bn=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ln=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fn=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dn=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cs={string:[[function(s){var t=Rn.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?X(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?X(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=Fn.exec(s)||Dn.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:qs({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=Bn.exec(s)||Ln.exec(s);if(!t)return null;var e,i,r=js({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(En[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ks(r)},"hsl"]],object:[[function(s){var t=s.r,e=s.g,i=s.b,r=s.a,n=r===void 0?1:r;return ut(t)&&ut(e)&&ut(i)?qs({r:Number(t),g:Number(e),b:Number(i),a:Number(n)}):null},"rgb"],[function(s){var t=s.h,e=s.s,i=s.l,r=s.a,n=r===void 0?1:r;if(!ut(t)||!ut(e)||!ut(i))return null;var o=js({h:Number(t),s:Number(e),l:Number(i),a:Number(n)});return Ks(o)},"hsl"],[function(s){var t=s.h,e=s.s,i=s.v,r=s.a,n=r===void 0?1:r;if(!ut(t)||!ut(e)||!ut(i))return null;var o=function(a){return{h:Ni(a.h),s:it(a.s,0,100),v:it(a.v,0,100),a:it(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(n)});return Oi(o)},"hsv"]]},Qs=function(s,t){for(var e=0;e<t.length;e++){var i=t[e][0](s);if(i)return[i,t[e][1]]}return[null,void 0]},Gn=function(s){return typeof s=="string"?Qs(s.trim(),cs.string):typeof s=="object"&&s!==null?Qs(s,cs.object):[null,void 0]},Ve=function(s,t){var e=Jt(s);return{h:e.h,s:it(e.s+100*t,0,100),l:e.l,a:e.a}},We=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},Js=function(s,t){var e=Jt(s);return{h:e.h,s:e.s,l:it(e.l+100*t,0,100),a:e.a}},us=function(){function s(t){this.parsed=Gn(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return X(We(this.rgba),2)},s.prototype.isDark=function(){return We(this.rgba)<.5},s.prototype.isLight=function(){return We(this.rgba)>=.5},s.prototype.toHex=function(){return t=Xe(this.rgba),e=t.r,i=t.g,r=t.b,o=(n=t.a)<1?me(X(255*n)):"","#"+me(e)+me(i)+me(r)+o;var t,e,i,r,n,o},s.prototype.toRgb=function(){return Xe(this.rgba)},s.prototype.toRgbString=function(){return t=Xe(this.rgba),e=t.r,i=t.g,r=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+r+", "+n+")":"rgb("+e+", "+i+", "+r+")";var t,e,i,r,n},s.prototype.toHsl=function(){return Zs(Jt(this.rgba))},s.prototype.toHslString=function(){return t=Zs(Jt(this.rgba)),e=t.h,i=t.s,r=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+r+"%, "+n+")":"hsl("+e+", "+i+"%, "+r+"%)";var t,e,i,r,n},s.prototype.toHsv=function(){return t=Ui(this.rgba),{h:X(t.h),s:X(t.s),v:X(t.v),a:X(t.a,3)};var t},s.prototype.invert=function(){return at({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),at(Ve(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),at(Ve(this.rgba,-t))},s.prototype.grayscale=function(){return at(Ve(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),at(Js(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),at(Js(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?at({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):X(this.rgba.a,3);var e},s.prototype.hue=function(t){var e=Jt(this.rgba);return typeof t=="number"?at({h:t,s:e.s,l:e.l,a:e.a}):X(e.h)},s.prototype.isEqual=function(t){return this.toHex()===at(t).toHex()},s}(),at=function(s){return s instanceof us?s:new us(s)},ti=[],Nn=function(s){s.forEach(function(t){ti.indexOf(t)<0&&(t(us,cs),ti.push(t))})};function Un(s,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in e)i[e[r]]=r;var n={};s.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var l=this.toRgb(),u=1/0,d="black";if(!n.length)for(var p in e)n[p]=new s(e[p]).toRgb();for(var f in e){var g=(a=l,h=n[f],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));g<u&&(u=g,d=f)}return d}},t.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":e[a];return h?new s(h).toRgb():null},"name"])}Nn([Un]);const Ut=class Kt{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Kt)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._normalize(t),this._value=this._cloneSource(t))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,o)=>n===e[o]);if(t!==null&&e!==null){const n=Object.keys(t),o=Object.keys(e);return n.length!==o.length?!1:n.every(a=>t[a]===e[a])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb,t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;const[e,i,r,n]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,r,n]=Kt._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,r=r*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(r<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,r,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,r,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,r,n=255]=t,e/=255,i/=255,r/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Kt.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=at(t);o.isValid()&&({r:e,g:i,b:r,a:n}=o.rgba,e/=255,i/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((r,n)=>{t[n]=Math.min(Math.max(r,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Kt||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};Ut.shared=new Ut;Ut._temp=new Ut;Ut.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let tt=Ut;const On={cullArea:null,cullable:!1,cullableChildren:!0};function Yn(s,t,e){const i=s.length;let r;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(r=t;r<n;++r)s[r]=s[r+e];s.length=n}const $n={allowChildren:!0,removeChildren(s=0,t){const e=t??this.children.length,i=e-s,r=[];if(i>0&&i<=e){for(let n=e-1;n>=s;n--){const o=this.children[n];o&&(this.renderGroup&&this.renderGroup.removeChild(o),r.push(o),o.parent=null)}Yn(this.children,s,e);for(let n=0;n<r.length;++n)this.emit("childRemoved",r[n],this,n),r[n].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(s){const t=this.getChildAt(s);return this.removeChild(t)},getChildAt(s){if(s<0||s>=this.children.length)throw new Error(`getChildAt: Index (${s}) does not exist.`);return this.children[s]},setChildIndex(s,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(s),this.addChildAt(s,t)},getChildIndex(s){const t=this.children.indexOf(s);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(s,t){this.allowChildren||Y(O,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${s}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(s.parent){const i=s.parent.children.indexOf(s);if(s.parent===this&&i===t)return s;i!==-1&&s.parent.children.splice(i,1)}return t===e.length?e.push(s):e.splice(t,0,s),s.parent=this,s.didChange=!0,s.didViewUpdate=!1,s._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(s),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",s,this,t),s.emit("added",this),s},swapChildren(s,t){if(s===t)return;const e=this.getChildIndex(s),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=s},removeFromParent(){var s;(s=this.parent)==null||s.removeChild(this)}};class Hn{constructor(t){this.pipe="filter",this.priority=1,this.filters=t==null?void 0:t.filters,this.filterArea=t==null?void 0:t.filterArea}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class Ss{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}class zn{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ss(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const ot=new zn;class Xn{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return ot.get(i.maskClass,t)}return t}returnMaskEffect(t){ot.return(t)}}const ds=new Xn;Bt.handleByList(H.MaskEffect,ds._effectClasses);const Vn={_mask:null,_filters:null,effects:[],addEffect(s){this.effects.indexOf(s)===-1&&(this.effects.push(s),this.effects.sort((e,i)=>e.priority-i.priority),this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(s){const t=this.effects.indexOf(s);t!==-1&&(this.effects.splice(t,1),!this.isRenderGroupRoot&&this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(s){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===s||(this._mask.effect&&(this.removeEffect(this._mask.effect),ds.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=s,s==null))return;const t=ds.getMaskEffect(s);this._mask.effect=t,this.addEffect(t)},get mask(){var s;return(s=this._mask)==null?void 0:s.mask},set filters(s){!Array.isArray(s)&&s&&(s=[s]),s=s,this._filters||(this._filters={filters:null,effect:null,filterArea:null});const t=(s==null?void 0:s.length)>0,e=this._filters.effect&&!t||!this._filters.effect&&t;if(s=Array.isArray(s)?s.slice(0):s,this._filters.filters=Object.freeze(s),e)if(t){const i=ot.get(Hn);this._filters.effect=i,this.addEffect(i)}else{const i=this._filters.effect;this.removeEffect(i),i.filterArea=null,i.filters=null,this._filters.effect=null,ot.return(i)}t&&(this._filters.effect.filters=s,this._filters.effect.filterArea=this.filterArea)},get filters(){var s;return(s=this._filters)==null?void 0:s.filters},set filterArea(s){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=s},get filterArea(){var s;return(s=this._filters)==null?void 0:s.filterArea}},Wn={label:null,get name(){return Y(O,"Container.name property has been removed, use Container.label instead"),this.label},set name(s){Y(O,"Container.name property has been removed, use Container.label instead"),this.label=s},getChildByName(s,t=!1){return this.getChildByLabel(s,t)},getChildByLabel(s,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const r=e[i];if(r.label===s||s instanceof RegExp&&s.test(r.label))return r}if(t)for(let i=0;i<e.length;i++){const n=e[i].getChildByLabel(s,!0);if(n)return n}return null},getChildrenByLabel(s,t=!1,e=[]){const i=this.children;for(let r=0;r<i.length;r++){const n=i[r];(n.label===s||s instanceof RegExp&&s.test(n.label))&&e.push(n)}if(t)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(s,!0,e);return e}},ei=new E;class mt{constructor(t=1/0,e=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=ei,this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new V);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=ei,this}set(t,e,i,r){this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}addFrame(t,e,i,r,n){n||(n=this.matrix);const o=n.a,a=n.b,h=n.c,c=n.d,l=n.tx,u=n.ty;let d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,m=o*t+h*e+l,_=a*t+c*e+u;m<d&&(d=m),_<p&&(p=_),m>f&&(f=m),_>g&&(g=_),m=o*i+h*e+l,_=a*i+c*e+u,m<d&&(d=m),_<p&&(p=_),m>f&&(f=m),_>g&&(g=_),m=o*t+h*r+l,_=a*t+c*r+u,m<d&&(d=m),_<p&&(p=_),m>f&&(f=m),_>g&&(g=_),m=o*i+h*r+l,_=a*i+c*r+u,m<d&&(d=m),_<p&&(p=_),m>f&&(f=m),_>g&&(g=_),this.minX=d,this.minY=p,this.maxX=f,this.maxY=g}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,{a:o,b:a,c:h,d:c,tx:l,ty:u}=t;let d=o*e+h*i+l,p=a*e+c*i+u;this.minX=d,this.minY=p,this.maxX=d,this.maxY=p,d=o*r+h*i+l,p=a*r+c*i+u,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY,d=o*e+h*n+l,p=a*e+c*n+u,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY,d=o*r+h*n+l,p=a*r+c*n+u,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new mt(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,r){let n=this.minX,o=this.minY,a=this.maxX,h=this.maxY;r||(r=this.matrix);const c=r.a,l=r.b,u=r.c,d=r.d,p=r.tx,f=r.ty;for(let g=e;g<i;g+=2){const m=t[g],_=t[g+1],y=c*m+u*_+p,x=l*m+d*_+f;n=y<n?y:n,o=x<o?x:o,a=y>a?y:a,h=x>h?x:h}this.minX=n,this.minY=o,this.maxX=a,this.maxY=h}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}const ft=new Ss(E),Ot=new Ss(mt);function Yi(s,t,e){e.clear();let i,r;return s.parent?t?i=s.parent.worldTransform:(r=ft.get().identity(),i=Ee(s,r)):i=E.IDENTITY,$i(s,e,i,t),r&&ft.return(r),e.isValid||e.set(0,0,0,0),e}function $i(s,t,e,i){var a,h;if(!s.visible||!s.measurable)return;let r;i?r=s.worldTransform:(s.updateLocalTransform(),r=ft.get(),r.appendFrom(s.localTransform,e));const n=t,o=!!s.effects.length;if(o&&(t=Ot.get().clear()),s.boundsArea)t.addRect(s.boundsArea,r);else{s.addBounds&&(t.matrix=r,s.addBounds(t));for(let c=0;c<s.children.length;c++)$i(s.children[c],t,r,i)}if(o){for(let c=0;c<s.effects.length;c++)(h=(a=s.effects[c]).addBounds)==null||h.call(a,t);n.addBounds(t,E.IDENTITY),Ot.return(t)}i||ft.return(r)}function Ee(s,t){const e=s.parent;return e&&(Ee(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}let qe=0;const si=500;function pt(...s){qe!==si&&(qe++,qe===si?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...s))}function Hi(s,t,e){return t.clear(),e||(e=E.IDENTITY),zi(s,t,e,s,!0),t.isValid||t.set(0,0,0,0),t}function zi(s,t,e,i,r){var h,c;let n;if(r)n=ft.get(),n=e.copyTo(n);else{if(!s.visible||!s.measurable)return;s.updateLocalTransform();const l=s.localTransform;n=ft.get(),n.appendFrom(l,e)}const o=t,a=!!s.effects.length;if(a&&(t=Ot.get().clear()),s.boundsArea)t.addRect(s.boundsArea,n);else{s.renderPipeId&&(t.matrix=n,s.addBounds(t));const l=s.children;for(let u=0;u<l.length;u++)zi(l[u],t,n,i,!1)}if(a){for(let l=0;l<s.effects.length;l++)(c=(h=s.effects[l]).addLocalBounds)==null||c.call(h,t,i);o.addBounds(t,E.IDENTITY),Ot.return(t)}ft.return(n)}function Xi(s,t){const e=s.children;for(let i=0;i<e.length;i++){const r=e[i],n=(r.uid&255)<<24|r._didChangeId&16777215;t.data[t.index]!==n&&(t.data[t.index]=n,t.didChange=!0),t.index++,r.children.length&&Xi(r,t)}return t.didChange}const qn=new E,jn={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(s,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=s/t*e:this.scale.x=e},_setHeight(s,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=s/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new mt});const s=this._localBoundsCacheData;return s.index=1,s.didChange=!1,s.data[0]!==this._didChangeId>>12&&(s.didChange=!0,s.data[0]=this._didChangeId>>12),Xi(this,s),s.didChange&&Hi(this,s.localBounds,qn),s.localBounds},getBounds(s,t){return Yi(this,s,t||new mt)}},Zn={_onRender:null,set onRender(s){const t=this.renderGroup;if(!s){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=s},get onRender(){return this._onRender}},Kn={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(s){this._zIndex!==s&&(this._zIndex=s,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Qn))}};function Qn(s,t){return s._zIndex-t._zIndex}const Jn={getGlobalPosition(s=new q,t=!1){return this.parent?this.parent.toGlobal(this._position,s,t):(s.x=this._position.x,s.y=this._position.y),s},toGlobal(s,t,e=!1){if(!e){this.updateLocalTransform();const i=Ee(this,new E);return i.append(this.localTransform),i.apply(s,t)}return this.worldTransform.apply(s,t)},toLocal(s,t,e,i){if(t&&(s=t.toGlobal(s,e,i)),!i){this.updateLocalTransform();const r=Ee(this,new E);return r.append(this.localTransform),r.applyInverse(s,e)}return this.worldTransform.applyInverse(s,e)}};class Vi{constructor(){this.uid=W("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}class to{constructor(t){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this._children=[],this.worldTransform=new E,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Vi,this._onRenderContainers=[],this.root=t,this.addChild(t)}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.onChildUpdate(t.root),this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){t.root.didChange&&this._removeChildFromUpdate(t.root);const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t!==this.root&&(this._children.push(t),t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t._onRender&&this.addOnRender(t)),t.renderGroup){if(t.renderGroup.root===t){this.addRenderGroupChild(t.renderGroup);return}}else t.renderGroup=this,t.didChange=!0;const e=t.children;t.isRenderGroupRoot||this.onChildUpdate(t);for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&this.removeOnRender(t),t.renderGroup.root!==t){const i=t.children;for(let r=0;r<i.length;r++)this.removeChild(i[r]);t.didChange&&t.renderGroup._removeChildFromUpdate(t),t.renderGroup=null}else this._removeRenderGroupChild(t.renderGroup);const e=this._children.indexOf(t);e>-1&&this._children.splice(e,1)}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}_removeChildFromUpdate(t){const e=this.childrenToUpdate[t.relativeRenderGroupDepth];if(!e)return;const i=e.list.indexOf(t);i>-1&&e.list.splice(i,1),e.index--}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}}function eo(s,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(s[i]=t[i])}const je=new J(null),Ze=new J(null),Ke=new J(null,1,1),ii=1,so=2,Qe=4;class Z extends gt{constructor(t={}){var e,i;super(),this.uid=W("renderable"),this._updateFlags=15,this.isRenderGroupRoot=!1,this.renderGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new E,this.relativeGroupTransform=new E,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new J(this,0,0),this._scale=Ke,this._pivot=Ze,this._skew=je,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1,eo(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(r=>this.addChild(r)),this.effects=[],(i=t.parent)==null||i.addChild(this)}static mixin(t){Object.defineProperties(Z.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...t){if(this.allowChildren||Y(O,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let i=0;i<t.length;i++)this.addChild(t[i]);return t[0]}const e=t[0];return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this.children.splice(i,1),this.renderGroup&&this.renderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){if(t&&t===this._skew&&this._updateSkew(),this._didChangeId++,!this.didChange)if(this.didChange=!0,this.isRenderGroupRoot){const e=this.renderGroup.renderGroupParent;e&&e.onChildUpdate(this)}else this.renderGroup&&this.renderGroup.onChildUpdate(this)}set isRenderGroup(t){if(this.isRenderGroupRoot&&t===!1)throw new Error("[Pixi] cannot undo a render group just yet");t&&this.enableRenderGroup()}get isRenderGroup(){return this.isRenderGroupRoot}enableRenderGroup(){if(this.renderGroup&&this.renderGroup.root===this)return;this.isRenderGroupRoot=!0;const t=this.renderGroup;if(t&&t.removeChild(this),this.renderGroup=new to(this),t){for(let e=0;e<t.renderGroupChildren.length;e++){const i=t.renderGroupChildren[e];let r=i.root;for(;r;){if(r===this){this.renderGroup.addRenderGroupChild(i);break}r=r.parent}}t.addRenderGroupChild(this.renderGroup)}this._updateIsSimple(),this.groupTransform=E.IDENTITY}_updateIsSimple(){this.isSimple=!this.isRenderGroupRoot&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new E),this.renderGroup&&(this.isRenderGroupRoot?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this._worldTransform.appendFrom(this.relativeGroupTransform,this.renderGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*wn}set angle(t){this.rotation=t*Cn}get pivot(){return this._pivot===Ze&&(this._pivot=new J(this,0,0)),this._pivot}set pivot(t){this._pivot===Ze&&(this._pivot=new J(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===je&&(this._skew=new J(this,0,0)),this._skew}set skew(t){this._skew===je&&(this._skew=new J(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Ke&&(this._scale=new J(this,1,1)),this._scale}set scale(t){this._scale===Ke&&(this._scale=new J(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();let r,n;typeof t!="object"?(r=t,n=e??t):(r=t.width,n=t.height??t.width),r!==void 0&&this._setWidth(r,i.width),n!==void 0&&this._setHeight(n,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){if((this._didLocalTransformChangeId&15)===this._didChangeId)return;this._didLocalTransformChangeId=this._didChangeId;const t=this.localTransform,e=this._scale,i=this._pivot,r=this._position,n=e._x,o=e._y,a=i._x,h=i._y;t.a=this._cx*n,t.b=this._sx*n,t.c=this._cy*o,t.d=this._sy*o,t.tx=r._x-(a*t.a+h*t.c),t.ty=r._y-(a*t.b+h*t.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=ii,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=tt.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=ii,this._onUpdate())}get tint(){const t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=so,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?1:0;(this.localDisplayStatus&2)>>1!==e&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=Qe,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?1:0;(this.localDisplayStatus&4)>>2!==e&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=Qe,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Qe,this.localDisplayStatus^=1,this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<i.length;++r)i[r].destroy(t)}}Z.mixin($n);Z.mixin(Jn);Z.mixin(Zn);Z.mixin(jn);Z.mixin(Vn);Z.mixin(Wn);Z.mixin(Kn);Z.mixin(On);class se extends Z{constructor(t=B.EMPTY){t instanceof B&&(t={texture:t});const{texture:e,anchor:i,roundPixels:r,width:n,height:o,...a}=t;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new J({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,n&&(this.width=n),o&&(this.height=o)}static from(t,e=!1){return t instanceof B?new se(t):new se(B.from(t,e))}set texture(t){t||(t=B.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){const e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){const e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_updateBounds(){In(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const t=this._anchor,e=this._texture,i=this._sourceBounds,{width:r,height:n}=e.orig;i.maxX=-t._x*r,i.minX=i.maxX+r,i.maxY=-t._y*n,i.minY=i.maxY+n}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width)}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){let i,r;typeof t!="object"?(i=t,r=e??t):(i=t.width,r=t.height??t.width),i!==void 0&&this._setWidth(i,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}}const io=new mt;function Wi(s,t,e){const i=io;s.measurable=!0,Yi(s,e,i),t.addBoundsMask(i),s.measurable=!1}function qi(s,t,e){const i=Ot.get();s.measurable=!0;const r=ft.get().identity(),n=ji(s,e,r);Hi(s,i,n),s.measurable=!1,t.addBoundsMask(i),ft.return(r),Ot.return(i)}function ji(s,t,e){return s?(s!==t&&(ji(s.parent,t,e),s.updateLocalTransform(),e.append(s.localTransform)),e):(pt("Mask bounds, renderable is not inside the root container"),e)}class Zi{constructor(t){this.priority=0,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof se),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){Wi(this.mask,t,e)}addLocalBounds(t,e){qi(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof se}}Zi.extension=H.MaskEffect;class Ki{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Ki.extension=H.MaskEffect;class Qi{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Wi(this.mask,t,e)}addLocalBounds(t,e){qi(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Z}}Qi.extension=H.MaskEffect;const ro={createCanvas:(s,t)=>{const e=document.createElement("canvas");return e.width=s,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")};let ri=ro;const It={get(){return ri},set(s){ri=s}};class Ji extends bt{constructor(t){t.resource||(t.resource=It.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;const e=t.resource;(this.pixelWidth!==e.width||this.pixelWidth!==e.height)&&this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}}Ji.extension=H.TextureSource;class Ps extends bt{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=It.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0),t.resource=e,pt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap}}Ps.extension=H.TextureSource;var fs=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(fs||{});class Je{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const tr=class Q{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Je(null,null,1/0),this.deltaMS=1/Q.targetFPMS,this.elapsedMS=1/Q.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=fs.NORMAL){return this._addListener(new Je(t,e,i))}addOnce(t,e,i=fs.NORMAL){return this._addListener(new Je(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Q.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Q.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Q._shared){const t=Q._shared=new Q;t.autoStart=!0,t._protected=!0}return Q._shared}static get system(){if(!Q._system){const t=Q._system=new Q;t.autoStart=!0,t._protected=!0}return Q._system}};tr.targetFPMS=.06;let ge=tr,ts;async function no(){return ts??(ts=(async()=>{var o;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(a=>{const h=document.createElement("video");h.onloadeddata=()=>a(h),h.onerror=()=>a(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(r),t.deleteTexture(i),(o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ts}const Ge=class er extends bt{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...er.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=ge.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await no(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ge.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ge.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ge.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}};Ge.extension=H.TextureSource;Ge.defaultOptions={...bt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ge.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let oo=Ge;const Dt=(s,t,e=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(i=>typeof i=="string"||e?t(i):i):s);class ao{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||pt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Dt(t);let r;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.test(e)){r=c.getCacheableAssets(i,e);break}}const n=new Map(Object.entries(r||{}));r||i.forEach(h=>{n.set(h,e)});const o=[...n.keys()],a={cacheKeys:o,keys:i};i.forEach(h=>{this._cacheMap.set(h,a)}),o.forEach(h=>{const c=r?r[h]:e;this._cache.has(h)&&this._cache.get(h)!==c&&pt("[Cache] already has key:",h),this._cache.set(h,n.get(h))})}remove(t){if(!this._cacheMap.has(t)){pt(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Gt=new ao,ps=[];Bt.handleByList(H.TextureSource,ps);function ho(s={}){const t=s&&s.resource,e=t?s.resource:s,i=t?s:{resource:s};for(let r=0;r<ps.length;r++){const n=ps[r];if(n.test(e))return new n(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function lo(s={},t=!1){const e=s&&s.resource,i=e?s.resource:s,r=e?s:{resource:s};if(!t&&Gt.has(i))return Gt.get(i);const n=new B({source:ho(r)});return n.on("destroy",()=>{Gt.has(i)&&Gt.remove(i)}),t||Gt.set(i,n),n}function co(s,t=!1){return typeof s=="string"?Gt.get(s):s instanceof bt?new B({source:s}):lo(s,t)}B.from=co;Bt.add(Zi,Ki,Qi,oo,Ps,Ji,Ms);var sr=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(sr||{});function nt(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function Vt(s){return s.split("?")[0].split("#")[0]}function uo(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fo(s,t,e){return s.replace(new RegExp(uo(t),"g"),e)}function po(s,t){let e="",i=0,r=-1,n=0,o=-1;for(let a=0;a<=s.length;++a){if(a<s.length)o=s.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const h=e.lastIndexOf("/");if(h!==e.length-1){h===-1?(e="",i=0):(e=e.slice(0,h),i=e.length-1-e.lastIndexOf("/")),r=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,r=a,n=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${s.slice(r+1,a)}`:e=s.slice(r+1,a),i=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const ie={toPosix(s){return fo(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){nt(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(s);return e?e[0]:""},toAbsolute(s,t,e){if(nt(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const i=Vt(this.toPosix(t??It.get().getBaseUrl())),r=Vt(this.toPosix(e??this.rootname(i)));return s=this.toPosix(s),s.startsWith("/")?ie.join(r,s.slice(1)):this.isAbsolute(s)?s:this.join(i,s)},normalize(s){if(nt(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const e=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const i=s.endsWith("/");return s=po(s,!1),s.length>0&&i&&(s+="/"),e?`/${s}`:t+s},isAbsolute(s){return nt(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let e=0;e<s.length;++e){const i=s[e];if(nt(i),i.length>0)if(t===void 0)t=i;else{const r=s[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(nt(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const e=t===47;let i=-1,r=!0;const n=this.getProtocol(s),o=s;s=s.slice(n.length);for(let a=s.length-1;a>=1;--a)if(t=s.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?e?"/":this.isUrl(o)?n+s:n:e&&i===1?"//":n+s.slice(0,i)},rootname(s){nt(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const e=s.indexOf("/",t.length);e!==-1?t=s.slice(0,e):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){nt(s),t&&nt(t),s=Vt(this.toPosix(s));let e=0,i=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let o=t.length-1,a=-1;for(n=s.length-1;n>=0;--n){const h=s.charCodeAt(n);if(h===47){if(!r){e=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=s.length),s.slice(e,i)}for(n=s.length-1;n>=0;--n)if(s.charCodeAt(n)===47){if(!r){e=n+1;break}}else i===-1&&(r=!1,i=n+1);return i===-1?"":s.slice(e,i)},extname(s){nt(s),s=Vt(this.toPosix(s));let t=-1,e=0,i=-1,r=!0,n=0;for(let o=s.length-1;o>=0;--o){const a=s.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":s.slice(t,i)},parse(s){nt(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=Vt(this.toPosix(s));let e=s.charCodeAt(0);const i=this.isAbsolute(s);let r;t.root=this.rootname(s),i||this.hasProtocol(s)?r=1:r=0;let n=-1,o=0,a=-1,h=!0,c=s.length-1,l=0;for(;c>=r;--c){if(e=s.charCodeAt(c),e===47){if(!h){o=c+1;break}continue}a===-1&&(h=!1,a=c+1),e===46?n===-1?n=c:l!==1&&(l=1):n!==-1&&(l=-1)}return n===-1||a===-1||l===0||l===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=s.slice(1,a):t.base=t.name=s.slice(o,a)):(o===0&&i?(t.name=s.slice(1,n),t.base=s.slice(1,a)):(t.name=s.slice(o,n),t.base=s.slice(o,a)),t.ext=s.slice(n,a)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function ir(s,t,e,i,r){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?ir(s.replace(i[e],a),t,e+1,i,r):r.push(s.replace(i[e],a))}}function mo(s){const t=/\{(.*?)\}/g,e=s.match(t),i=[];if(e){const r=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),ir(s,r,0,e,i)}else i.push(s);return i}const ni=s=>!Array.isArray(s);class rr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return Dt(e||i,n=>typeof n=="string"?n:Array.isArray(n)?n.map(o=>(o==null?void 0:o.src)??o):n!=null&&n.src?n.src:n,!0)}addManifest(t){this._manifest&&pt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([n,o])=>typeof o=="string"||Array.isArray(o)?{alias:n,src:o}:{alias:n,...o})),r.forEach(n=>{const o=n.src,a=n.alias;let h;if(typeof a=="string"){const c=this._createBundleAssetId(t,a);i.push(c),h=[a,c]}else{const c=a.map(l=>this._createBundleAssetId(t,l));i.push(...c),h=[...a,...c]}this.add({...n,alias:h,src:o})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=n=>{this.hasKey(n)&&pt(`[Resolver] already has key: ${n} overwriting`)},Dt(e).forEach(n=>{const{src:o}=n;let{data:a,format:h,loadParser:c}=n;const l=Dt(o).map(p=>typeof p=="string"?mo(p):Array.isArray(p)?p:[p]),u=this.getAlias(n);Array.isArray(u)?u.forEach(i):i(u);const d=[];l.forEach(p=>{p.forEach(f=>{let g={};if(typeof f!="object"){g.src=f;for(let m=0;m<this._parsers.length;m++){const _=this._parsers[m];if(_.test(f)){g=_.parse(f);break}}}else a=f.data??a,h=f.format??h,c=f.loadParser??c,g={...g,...f};if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:u,data:a,format:h,loadParser:c}),d.push(g)})}),u.forEach(p=>{this._assetMap[p]=d})})}resolveBundle(t){const e=ni(t);t=Dt(t);const i={};return t.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const h in o){const c=o[h];a[this._extractAssetIdFromBundle(r,h)]=c}i[r]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const r in e)i[r]=e[r].src;return i}return e.src}resolve(t){const e=ni(t);t=Dt(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=this._getPreferredOrder(n);o==null||o.priority.forEach(a=>{o.params[a].forEach(h=>{const c=n.filter(l=>l[a]?l[a]===h:!1);c.length&&(n=c)})}),this._resolverHash[r]=n[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=ie.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??t.format??go(t.src),t}}rr.RETINA_PREFIX=/@([0-9\.]+)x/;function go(s){return s.split(".").pop().split("?").shift().split("#").shift()}const oi=(s,t)=>{const e=t.split("?")[1];return e&&(s+=`?${e}`),s},nr=class Qt{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof B?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Qt.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Qt.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const r=this._frameKeys[e],n=this._frames[r],o=n.frame;if(o){let a=null,h=null;const c=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,l=new V(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);n.rotated?a=new V(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new V(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(h=new V(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new B({source:this.textureSource,frame:a,orig:l,trim:h,rotate:n.rotated?2:0,defaultAnchor:n.anchor,defaultBorders:n.borders,label:r.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Qt.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Qt.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};nr.BATCH_SIZE=1e3;let ai=nr;const yo=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function or(s,t,e){const i={};if(s.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[r]=t.textures[r]}),!e){const r=ie.dirname(s[0]);t.linkedSheets.forEach((n,o)=>{const a=or([`${r}/${t.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(i,a)})}return i}const xo={extension:H.Asset,cache:{test:s=>s instanceof ai,getCacheableAssets:(s,t)=>or(s,t,!1)},resolver:{test:s=>{const e=s.split("?")[0].split("."),i=e.pop(),r=e.pop();return i==="json"&&yo.includes(r)},parse:s=>{var e;const t=s.split(".");return{resolution:parseFloat(((e=rr.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:H.LoadParser,priority:sr.Normal},async testParse(s,t){return ie.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,e){var c,l;const{texture:i,imageFilename:r}=(t==null?void 0:t.data)??{};let n=ie.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let o;if(i instanceof B)o=i;else{const u=oi(n+(r??s.meta.image),t.src);o=(await e.load([u]))[u]}const a=new ai(o.source,s);await a.parse();const h=(c=s==null?void 0:s.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(h)){const u=[];for(const p of h){if(typeof p!="string")continue;let f=n+p;(l=t.data)!=null&&l.ignoreMultiPack||(f=oi(f,t.src),u.push(e.load({src:f,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(p=>{p.linkedSheets=[a].concat(a.linkedSheets.filter(f=>f!==p))})}return a},async unload(s,t,e){await e.unload(s.textureSource._sourceOrigin),s.destroy(!1)}}};Bt.add(xo);class _o{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const r=t[i];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var r,n;const i=this.resources[e];t!==i&&(i&&((r=t.off)==null||r.call(t,"change",this.onResourceChange,this)),(n=t.on)==null||n.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const r=t[i];(e=r.off)==null||e.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}const ms=[];Bt.handleByNamedList(H.Environment,ms);async function bo(s){if(s)for(let t=0;t<ms.length;t++){const e=ms[t];if(e.value.test()){await e.value.load();return}}}let Wt;function wo(){if(typeof Wt=="boolean")return Wt;try{Wt=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Wt=!1}return Wt}var Ts={exports:{}};Ts.exports=Ne;Ts.exports.default=Ne;function Ne(s,t,e){e=e||2;var i=t&&t.length,r=i?t[0]*e:s.length,n=ar(s,0,r,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,h,c,l,u,d,p;if(i&&(n=So(s,t,n,e)),s.length>80*e){a=c=s[0],h=l=s[1];for(var f=e;f<r;f+=e)u=s[f],d=s[f+1],u<a&&(a=u),d<h&&(h=d),u>c&&(c=u),d>l&&(l=d);p=Math.max(c-a,l-h),p=p!==0?32767/p:0}return re(n,o,e,a,h,p,0),o}function ar(s,t,e,i,r){var n,o;if(r===xs(s,t,e,i)>0)for(n=t;n<e;n+=i)o=hi(n,s[n],s[n+1],o);else for(n=e-i;n>=t;n-=i)o=hi(n,s[n],s[n+1],o);return o&&Ue(o,o.next)&&(oe(o),o=o.next),o}function Et(s,t){if(!s)return s;t||(t=s);var e=s,i;do if(i=!1,!e.steiner&&(Ue(e,e.next)||D(e.prev,e,e.next)===0)){if(oe(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function re(s,t,e,i,r,n,o){if(s){!o&&n&&Eo(s,i,r,n);for(var a=s,h,c;s.prev!==s.next;){if(h=s.prev,c=s.next,n?vo(s,i,r,n):Co(s)){t.push(h.i/e|0),t.push(s.i/e|0),t.push(c.i/e|0),oe(s),s=c.next,a=c.next;continue}if(s=c,s===a){o?o===1?(s=Ao(Et(s),t,e),re(s,t,e,i,r,n,2)):o===2&&Mo(s,t,e,i,r,n):re(Et(s),t,e,i,r,n,1);break}}}}function Co(s){var t=s.prev,e=s,i=s.next;if(D(t,e,i)>=0)return!1;for(var r=t.x,n=e.x,o=i.x,a=t.y,h=e.y,c=i.y,l=r<n?r<o?r:o:n<o?n:o,u=a<h?a<c?a:c:h<c?h:c,d=r>n?r>o?r:o:n>o?n:o,p=a>h?a>c?a:c:h>c?h:c,f=i.next;f!==t;){if(f.x>=l&&f.x<=d&&f.y>=u&&f.y<=p&&Nt(r,a,n,h,o,c,f.x,f.y)&&D(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function vo(s,t,e,i){var r=s.prev,n=s,o=s.next;if(D(r,n,o)>=0)return!1;for(var a=r.x,h=n.x,c=o.x,l=r.y,u=n.y,d=o.y,p=a<h?a<c?a:c:h<c?h:c,f=l<u?l<d?l:d:u<d?u:d,g=a>h?a>c?a:c:h>c?h:c,m=l>u?l>d?l:d:u>d?u:d,_=gs(p,f,t,e,i),y=gs(g,m,t,e,i),x=s.prevZ,b=s.nextZ;x&&x.z>=_&&b&&b.z<=y;){if(x.x>=p&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==o&&Nt(a,l,h,u,c,d,x.x,x.y)&&D(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=p&&b.x<=g&&b.y>=f&&b.y<=m&&b!==r&&b!==o&&Nt(a,l,h,u,c,d,b.x,b.y)&&D(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=_;){if(x.x>=p&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==o&&Nt(a,l,h,u,c,d,x.x,x.y)&&D(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=g&&b.y>=f&&b.y<=m&&b!==r&&b!==o&&Nt(a,l,h,u,c,d,b.x,b.y)&&D(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ao(s,t,e){var i=s;do{var r=i.prev,n=i.next.next;!Ue(r,n)&&hr(r,i,i.next,n)&&ne(r,n)&&ne(n,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(n.i/e|0),oe(i),oe(i.next),i=s=n),i=i.next}while(i!==s);return Et(i)}function Mo(s,t,e,i,r,n){var o=s;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Lo(o,a)){var h=lr(o,a);o=Et(o,o.next),h=Et(h,h.next),re(o,t,e,i,r,n,0),re(h,t,e,i,r,n,0);return}a=a.next}o=o.next}while(o!==s)}function So(s,t,e,i){var r=[],n,o,a,h,c;for(n=0,o=t.length;n<o;n++)a=t[n]*i,h=n<o-1?t[n+1]*i:s.length,c=ar(s,a,h,i,!1),c===c.next&&(c.steiner=!0),r.push(Bo(c));for(r.sort(Po),n=0;n<r.length;n++)e=To(r[n],e);return e}function Po(s,t){return s.x-t.x}function To(s,t){var e=ko(s,t);if(!e)return t;var i=lr(e,s);return Et(i,i.next),Et(e,e.next)}function ko(s,t){var e=t,i=s.x,r=s.y,n=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var a=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var h=o,c=o.x,l=o.y,u=1/0,d;e=o;do i>=e.x&&e.x>=c&&i!==e.x&&Nt(r<l?i:n,r,c,l,r<l?n:i,r,e.x,e.y)&&(d=Math.abs(r-e.y)/(i-e.x),ne(e,s)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&Io(o,e)))&&(o=e,u=d)),e=e.next;while(e!==h);return o}function Io(s,t){return D(s.prev,s,t.prev)<0&&D(t.next,s,s.next)<0}function Eo(s,t,e,i){var r=s;do r.z===0&&(r.z=gs(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==s);r.prevZ.nextZ=null,r.prevZ=null,Ro(r)}function Ro(s){var t,e,i,r,n,o,a,h,c=1;do{for(e=s,s=null,n=null,o=0;e;){for(o++,i=e,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(h=c;a>0||h>0&&i;)a!==0&&(h===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,h--),n?n.nextZ=r:s=r,r.prevZ=n,n=r;e=i}n.nextZ=null,c*=2}while(o>1);return s}function gs(s,t,e,i,r){return s=(s-e)*r|0,t=(t-i)*r|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,s|t<<1}function Bo(s){var t=s,e=s;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==s);return e}function Nt(s,t,e,i,r,n,o,a){return(r-o)*(t-a)>=(s-o)*(n-a)&&(s-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(r-o)*(i-a)}function Lo(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!Fo(s,t)&&(ne(s,t)&&ne(t,s)&&Do(s,t)&&(D(s.prev,s,t.prev)||D(s,t.prev,t))||Ue(s,t)&&D(s.prev,s,s.next)>0&&D(t.prev,t,t.next)>0)}function D(s,t,e){return(t.y-s.y)*(e.x-t.x)-(t.x-s.x)*(e.y-t.y)}function Ue(s,t){return s.x===t.x&&s.y===t.y}function hr(s,t,e,i){var r=xe(D(s,t,e)),n=xe(D(s,t,i)),o=xe(D(e,i,s)),a=xe(D(e,i,t));return!!(r!==n&&o!==a||r===0&&ye(s,e,t)||n===0&&ye(s,i,t)||o===0&&ye(e,s,i)||a===0&&ye(e,t,i))}function ye(s,t,e){return t.x<=Math.max(s.x,e.x)&&t.x>=Math.min(s.x,e.x)&&t.y<=Math.max(s.y,e.y)&&t.y>=Math.min(s.y,e.y)}function xe(s){return s>0?1:s<0?-1:0}function Fo(s,t){var e=s;do{if(e.i!==s.i&&e.next.i!==s.i&&e.i!==t.i&&e.next.i!==t.i&&hr(e,e.next,s,t))return!0;e=e.next}while(e!==s);return!1}function ne(s,t){return D(s.prev,s,s.next)<0?D(s,t,s.next)>=0&&D(s,s.prev,t)>=0:D(s,t,s.prev)<0||D(s,s.next,t)<0}function Do(s,t){var e=s,i=!1,r=(s.x+t.x)/2,n=(s.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&r<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==s);return i}function lr(s,t){var e=new ys(s.i,s.x,s.y),i=new ys(t.i,t.x,t.y),r=s.next,n=t.prev;return s.next=t,t.prev=s,e.next=r,r.prev=e,i.next=e,e.prev=i,n.next=i,i.prev=n,i}function hi(s,t,e,i){var r=new ys(s,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oe(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function ys(s,t,e){this.i=s,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ne.deviation=function(s,t,e,i){var r=t&&t.length,n=r?t[0]*e:s.length,o=Math.abs(xs(s,0,n,e));if(r)for(var a=0,h=t.length;a<h;a++){var c=t[a]*e,l=a<h-1?t[a+1]*e:s.length;o-=Math.abs(xs(s,c,l,e))}var u=0;for(a=0;a<i.length;a+=3){var d=i[a]*e,p=i[a+1]*e,f=i[a+2]*e;u+=Math.abs((s[d]-s[f])*(s[p+1]-s[d+1])-(s[d]-s[p])*(s[f+1]-s[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function xs(s,t,e,i){for(var r=0,n=t,o=e-i;n<e;n+=i)r+=(s[o]-s[n])*(s[n+1]+s[o+1]),o=n;return r}Ne.flatten=function(s){for(var t=s[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,r=0;r<s.length;r++){for(var n=0;n<s[r].length;n++)for(var o=0;o<t;o++)e.vertices.push(s[r][n][o]);r>0&&(i+=s[r-1].length,e.holes.push(i))}return e};var Go=Ts.exports;const No=As(Go);var cr=(s=>(s[s.NONE=0]="NONE",s[s.COLOR=16384]="COLOR",s[s.STENCIL=1024]="STENCIL",s[s.DEPTH=256]="DEPTH",s[s.COLOR_DEPTH=16640]="COLOR_DEPTH",s[s.COLOR_STENCIL=17408]="COLOR_STENCIL",s[s.DEPTH_STENCIL=1280]="DEPTH_STENCIL",s[s.ALL=17664]="ALL",s))(cr||{});class Uo{constructor(t){this.items=[],this._name=t}emit(t,e,i,r,n,o,a,h){const{name:c,items:l}=this;for(let u=0,d=l.length;u<d;u++)l[u][c](t,e,i,r,n,o,a,h);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Oo=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],ur=class dr extends gt{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name;const e=[...Oo,...t.runners??[]];this._addRunners(...e),this._addSystems(t.systems),this._addPipes(t.renderPipes,t.renderPipeAdaptors),this._unsafeEvalCheck()}async init(t={}){for(const e in this._systemsHash)t={...this._systemsHash[e].constructor.defaultOptions,...t};t={...dr.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let e=0;e<this.runners.init.items.length;e++)await this.runners.init.items[e].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof Z&&(i={container:i},e&&(Y(O,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor){const r=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=r?i.clearColor:tt.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=cr.ALL);const{clear:i,clearColor:r,target:n}=t;tt.shared.setValue(r??this.background.colorRgba),e.renderTarget.clear(n,i,tt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new Uo(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const r in this.runners)this.runners[r].add(i);return this}_addPipes(t,e){const i=e.reduce((r,n)=>(r[n.name]=n.value,r),{});t.forEach(r=>{const n=r.value,o=r.name,a=i[o];this.renderPipes[o]=new n(this,a?new a:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!wo())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};ur.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let fr=ur,_e;function Yo(s){return _e!==void 0||(_e=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:s??fr.defaultOptions.failIfMajorPerformanceCaveat};try{if(!It.get().getWebGLRenderingContext())return!1;let r=It.get().createCanvas().getContext("webgl",t);const n=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}})()),_e}let be;async function $o(s={}){return be!==void 0||(be=await(async()=>{if(!It.get().getNavigator().gpu)return!1;try{return await(await navigator.gpu.requestAdapter(s)).requestDevice(),!0}catch{return!1}})()),be}const li=["webgl","webgpu","canvas"];async function Ho(s){let t=[];s.preference?(t.push(s.preference),li.forEach(n=>{n!==s.preference&&t.push(n)})):t=li.slice();let e;await bo(s.manageImports??!0);let i={};for(let n=0;n<t.length;n++){const o=t[n];if(o==="webgpu"&&await $o()){const{WebGPURenderer:a}=await Ie(()=>import("./WebGPURenderer-lyM9mhaa.js"),__vite__mapDeps([5,2,6,3]));e=a,i={...s,...s.webgpu};break}else if(o==="webgl"&&Yo(s.failIfMajorPerformanceCaveat??fr.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await Ie(()=>import("./WebGLRenderer-N8rVeROe.js"),__vite__mapDeps([7,2,4,6]));e=a,i={...s,...s.webgl};break}else if(o==="canvas"){i={...s};break}}delete i.webgpu,delete i.webgl;const r=new e;return await r.init(i),r}const pr=class _s{constructor(...t){this.stage=new Z,t[0]!==void 0&&Y(O,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await Ho(t),_s._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Y(O,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=_s._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};pr._plugins=[];let mr=pr;Bt.handleByList(H.Application,mr._plugins);var zo=Vo,es={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Xo=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Vo(s){var t=[];return s.replace(Xo,function(e,i,r){var n=i.toLowerCase();for(r=qo(r),n=="m"&&r.length>2&&(t.push([i].concat(r.splice(0,2))),n="l",i=i=="m"?"l":"L");;){if(r.length==es[n])return r.unshift(i),t.push(r);if(r.length<es[n])throw new Error("malformed path data");t.push([i].concat(r.splice(0,es[n])))}}),t}var Wo=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function qo(s){var t=s.match(Wo);return t?t.map(Number):[]}const jo=As(zo);function Zo(s,t){const e=jo(s),i=[];let r=null,n=0,o=0;for(let a=0;a<e.length;a++){const h=e[a],c=h[0],l=h;switch(c){case"M":n=l[1],o=l[2],t.moveTo(n,o);break;case"m":n+=l[1],o+=l[2],t.moveTo(n,o);break;case"H":n=l[1],t.lineTo(n,o);break;case"h":n+=l[1],t.lineTo(n,o);break;case"V":o=l[1],t.lineTo(n,o);break;case"v":o+=l[1],t.lineTo(n,o);break;case"L":n=l[1],o=l[2],t.lineTo(n,o);break;case"l":n+=l[1],o+=l[2],t.lineTo(n,o);break;case"C":n=l[5],o=l[6],t.bezierCurveTo(l[1],l[2],l[3],l[4],n,o);break;case"c":t.bezierCurveTo(n+l[1],o+l[2],n+l[3],o+l[4],n+l[5],o+l[6]),n+=l[5],o+=l[6];break;case"S":n=l[3],o=l[4],t.bezierCurveToShort(l[1],l[2],n,o);break;case"s":t.bezierCurveToShort(n+l[1],o+l[2],n+l[3],o+l[4]),n+=l[3],o+=l[4];break;case"Q":n=l[3],o=l[4],t.quadraticCurveTo(l[1],l[2],n,o);break;case"q":t.quadraticCurveTo(n+l[1],o+l[2],n+l[3],o+l[4]),n+=l[3],o+=l[4];break;case"T":n=l[1],o=l[2],t.quadraticCurveToShort(n,o);break;case"t":n+=l[1],o+=l[2],t.quadraticCurveToShort(n,o);break;case"A":n=l[6],o=l[7],t.arcToSvg(l[1],l[2],l[3],l[4],l[5],n,o);break;case"a":n+=l[6],o+=l[7],t.arcToSvg(l[1],l[2],l[3],l[4],l[5],n,o);break;case"Z":case"z":t.closePath(),i.length>0&&(r=i.pop(),r?(n=r.startX,o=r.startY):(n=0,o=0)),r=null;break;default:pt(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&r===null&&(r={startX:n,startY:o},i.push(r))}return t}class ks{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new ks(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=i}strokeContains(t,e,i){if(this.radius===0)return!1;const r=this.x-t,n=this.y-e,o=this.radius,a=i/2,h=Math.sqrt(r*r+n*n);return h<o+a&&h>o-a}getBounds(t){return t=t||new V,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Is{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new Is(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i){const{halfWidth:r,halfHeight:n}=this;if(r<=0||n<=0)return!1;const o=i/2,a=r-o,h=n-o,c=r+o,l=n+o,u=t-this.x,d=e-this.y,p=u*u/(a*a)+d*d/(h*h),f=u*u/(c*c)+d*d/(l*l);return p>1&&f<=1}getBounds(){return new V(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Ko(s,t,e,i,r,n){const o=s-e,a=t-i,h=r-e,c=n-i,l=o*h+a*c,u=h*h+c*c;let d=-1;u!==0&&(d=l/u);let p,f;d<0?(p=e,f=i):d>1?(p=r,f=n):(p=e+d*h,f=i+d*c);const g=s-p,m=t-f;return g*g+m*m}class te{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let r=0,n=e.length;r<n;r++)i.push(e[r].x,e[r].y);e=i}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new te(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){const a=this.points[n*2],h=this.points[n*2+1],c=this.points[o*2],l=this.points[o*2+1];h>e!=l>e&&t<(c-a)*((e-h)/(l-h))+a&&(i=!i)}return i}strokeContains(t,e,i){const r=i/2,n=r*r,{points:o}=this,a=o.length-(this.closePath?0:2);for(let h=0;h<a;h+=2){const c=o[h],l=o[h+1],u=o[(h+2)%o.length],d=o[(h+3)%o.length];if(Ko(t,e,c,l,u,d)<=n)return!0}return!1}getBounds(t){t=t||new V;const e=this.points;let i=1/0,r=-1/0,n=1/0,o=-1/0;for(let a=0,h=e.length;a<h;a+=2){const c=e[a],l=e[a+1];i=c<i?c:i,r=c>r?c:r,n=l<n?l:n,o=l>o?l:o}return t.x=i,t.width=r-i,t.y=n,t.height=o-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const we=(s,t,e,i,r,n)=>{const o=s-e,a=t-i,h=Math.sqrt(o*o+a*a);return h>=r-n&&h<=r+n};class Es{constructor(t=0,e=0,i=0,r=0,n=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n}getBounds(t){return t=t||new V,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Es(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),n=e-(this.y+i);const o=i*i;if(r*r+n*n<=o||(r=t-(this.x+this.width-i),r*r+n*n<=o)||(n=e-(this.y+this.height-i),r*r+n*n<=o)||(r=t-(this.x+i),r*r+n*n<=o))return!0}return!1}strokeContains(t,e,i){const{x:r,y:n,width:o,height:a,radius:h}=this,c=i/2,l=r+h,u=n+h,d=o-h*2,p=a-h*2,f=r+o,g=n+a;return(t>=r-c&&t<=r+c||t>=f-c&&t<=f+c)&&e>=u&&e<=u+p||(e>=n-c&&e<=n+c||e>=g-c&&e<=g+c)&&t>=l&&t<=l+d?!0:t<l&&e<u&&we(t,e,l,u,h,c)||t>f-h&&e<u&&we(t,e,f-h,u,h,c)||t>f-h&&e>g-h&&we(t,e,f-h,g-h,h,c)||t<l&&e>g-h&&we(t,e,l,g-h,h,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var K=(s=>(s[s.MAP_READ=1]="MAP_READ",s[s.MAP_WRITE=2]="MAP_WRITE",s[s.COPY_SRC=4]="COPY_SRC",s[s.COPY_DST=8]="COPY_DST",s[s.INDEX=16]="INDEX",s[s.VERTEX=32]="VERTEX",s[s.UNIFORM=64]="UNIFORM",s[s.STORAGE=128]="STORAGE",s[s.INDIRECT=256]="INDIRECT",s[s.QUERY_RESOLVE=512]="QUERY_RESOLVE",s[s.STATIC=1024]="STATIC",s))(K||{});class ae extends gt{constructor(t){let{data:e,size:i}=t;const{usage:r,label:n,shrinkToFit:o}=t;super(),this.uid=W("buffer"),this._resourceType="buffer",this._resourceId=W("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i=i??(e==null?void 0:e.byteLength);const a=!!e;this.descriptor={size:i,usage:r,mappedAtCreation:a,label:n},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&K.STATIC)}set static(t){t?this.descriptor.usage|=K.STATIC:this.descriptor.usage&=~K.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const r=this._data;if(this._data=t,r.length!==t.length){!this.shrinkToFit&&t.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=W("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function gr(s,t){if(!(s instanceof ae)){let e=t?K.INDEX:K.VERTEX;s instanceof Array&&(t?(s=new Uint32Array(s),e=K.INDEX|K.COPY_DST):(s=new Float32Array(s),e=K.VERTEX|K.COPY_DST)),s=new ae({data:s,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return s}function Qo(s,t,e){const i=s.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const r=i.buffer.data;let n=1/0,o=1/0,a=-1/0,h=-1/0;const c=r.BYTES_PER_ELEMENT,l=(i.offset||0)/c,u=(i.stride||2*4)/c;for(let d=l;d<r.length;d+=u){const p=r[d],f=r[d+1];p>a&&(a=p),f>h&&(h=f),p<n&&(n=p),f<o&&(o=f)}return e.minX=n,e.minY=o,e.maxX=a,e.maxY=h,e}function Jo(s){return(s instanceof ae||Array.isArray(s)||s.BYTES_PER_ELEMENT)&&(s={buffer:s}),s.buffer=gr(s.buffer,!1),s}class ta extends gt{constructor(t){const{attributes:e,indexBuffer:i,topology:r}=t;super(),this.uid=W("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new mt,this._boundsDirty=!0,this.attributes=e,this.buffers=[],this.instanceCount=t.instanceCount||1;for(const n in e){const o=e[n]=Jo(e[n]);this.buffers.indexOf(o.buffer)===-1&&(this.buffers.push(o.buffer),o.buffer.on("update",this.onBufferUpdate,this),o.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=gr(i,!0),this.buffers.push(this.indexBuffer)),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Qo(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const ea=new Float32Array(1),sa=new Uint32Array(1);class ia extends ta{constructor(){const e=new ae({data:ea,label:"attribute-batch-buffer",usage:K.VERTEX|K.COPY_DST,shrinkToFit:!1}),i=new ae({data:sa,label:"index-batch-buffer",usage:K.INDEX|K.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:r,offset:0,location:1},aUV:{buffer:e,format:"float32x2",stride:r,offset:2*4,location:3},aColor:{buffer:e,format:"unorm8x4",stride:r,offset:4*4,location:0},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:r,offset:5*4,location:2}},indexBuffer:i})}}const yr=16,xr={};function ra(s,t){let e=0;for(let i=0;i<t;i++)e=e*31+s[i].uid>>>0;return xr[e]||na(s,e)}function na(s,t){const e={};let i=0;for(let n=0;n<yr;n++){const o=n<s.length?s[n]:B.EMPTY.source;e[i++]=o.source,e[i++]=o.style}const r=new _o(e);return xr[t]=r,r}class ci{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function ui(s,t){const e=s.byteLength/8|0,i=new Float64Array(s,0,e);new Float64Array(t,0,e).set(i);const n=s.byteLength-e*8;if(n>0){const o=new Uint8Array(s,e*8,n);new Uint8Array(t,e*8,n).set(o)}}const oa={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var aa=(s=>(s[s.DISABLED=0]="DISABLED",s[s.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",s[s.MASK_ACTIVE=2]="MASK_ACTIVE",s[s.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",s[s.NONE=4]="NONE",s))(aa||{});function di(s,t){return t.alphaMode==="no-premultiply-alpha"&&oa[s]||s}class fi{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class pi{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let qt=0;const _r=class br{constructor(t={}){this.uid=W("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0,t={...br.defaultOptions,...t};const{vertexSize:e,indexSize:i}=t;this.attributeBuffer=new ci(e*this._vertexSize*4),this.indexBuffer=new Uint16Array(i)}begin(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t.indexStart=this.indexSize,t.location=this.attributeSize,t.batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.vertexSize*this._vertexSize}checkAndUpdateTexture(t,e){const i=t.batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t.textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0,t.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,t.location,t.textureId)}break(t){const e=this._elements;let i=this._textureBatchPool[this._textureBatchPoolIndex++]||new fi;if(i.clear(),!e[this.elementStart])return;const r=e[this.elementStart];let n=di(r.blendMode,r.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const o=this.attributeBuffer.float32View,a=this.attributeBuffer.uint32View,h=this.indexBuffer;let c=this._batchIndexSize,l=this._batchIndexStart,u="startBatch",d=this._batchPool[this._batchPoolIndex++]||new pi;for(let p=this.elementStart;p<this.elementSize;++p){const f=e[p];e[p]=null;const m=f.texture._source,_=di(f.blendMode,m),y=n!==_;if(m._batchTick===qt&&!y){f.textureId=m._textureBindLocation,c+=f.indexSize,f.packAttributes(o,a,f.location,f.textureId),f.packIndex(h,f.indexStart,f.location/this._vertexSize),f.batch=d;continue}m._batchTick=qt,(i.count>=yr||y)&&(this._finishBatch(d,l,c-l,i,n,t,u),u="renderBatch",l=c,n=_,i=this._textureBatchPool[this._textureBatchPoolIndex++]||new fi,i.clear(),d=this._batchPool[this._batchPoolIndex++]||new pi,++qt),f.textureId=m._textureBindLocation=i.count,i.ids[m.uid]=i.count,i.textures[i.count++]=m,f.batch=d,c+=f.indexSize,f.packAttributes(o,a,f.location,f.textureId),f.packIndex(h,f.indexStart,f.location/this._vertexSize)}i.count>0&&(this._finishBatch(d,l,c-l,i,n,t,u),l=c,++qt),this.elementStart=this.elementSize,this._batchIndexStart=l,this._batchIndexSize=c}_finishBatch(t,e,i,r,n,o,a){t.gpuBindGroup=null,t.action=a,t.batcher=this,t.textures=r,t.blendMode=n,t.start=e,t.size=i,++qt,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new ci(e);ui(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let n=0;n<e.length;n++)r[n]=e[n];else ui(e.buffer,r.buffer);this.indexBuffer=r}destroy(){for(let t=0;t<this.batches.length;t++)this.batches[t].destroy();this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};_r.defaultOptions={vertexSize:4,indexSize:6};let ha=_r;function la(s,t,e,i,r,n,o,a=null){let h=0;e*=t,r*=n;const c=a.a,l=a.b,u=a.c,d=a.d,p=a.tx,f=a.ty;for(;h<o;){const g=s[e],m=s[e+1];i[r]=c*g+u*m+p,i[r+1]=l*g+d*m+f,r+=n,e+=t,h++}}function ca(s,t,e,i){let r=0;for(t*=e;r<i;)s[t]=0,s[t+1]=0,t+=e,r++}function wr(s,t,e,i,r){const n=t.a,o=t.b,a=t.c,h=t.d,c=t.tx,l=t.ty;e=e||0,i=i||2,r=r||s.length/i-e;let u=e*i;for(let d=0;d<r;d++){const p=s[u],f=s[u+1];s[u]=n*p+a*f+c,s[u+1]=o*p+h*f+l,u+=i}}function ua(s,t,e){const i=s>>16&255,r=s>>8&255,n=s&255,o=t>>16&255,a=t>>8&255,h=t&255,c=i+(o-i)*e,l=r+(a-r)*e,u=n+(h-n)*e;return(c<<16)+(l<<8)+u}const ss=16777215;function da(s,t){return s===ss||t===ss?s+t-ss:ua(s,t,.5)}class Cr{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(t,e,i){const r=this.geometryData.indices;for(let n=0;n<this.indexSize;n++)t[e++]=r[n+this.indexOffset]+i-this.vertexOffset}packAttributes(t,e,i,r){const n=this.geometryData,o=this.renderable,a=n.vertices,h=n.uvs,c=this.vertexOffset*2,l=(this.vertexOffset+this.vertexSize)*2,u=this.color,d=u>>16|u&65280|(u&255)<<16;if(this.applyTransform){const p=da(d,o.groupColor)+(this.alpha*o.groupAlpha*255<<24),f=o.groupTransform,g=r<<16|this.roundPixels&65535,m=f.a,_=f.b,y=f.c,x=f.d,b=f.tx,M=f.ty;for(let I=c;I<l;I+=2){const v=a[I],A=a[I+1];t[i]=m*v+y*A+b,t[i+1]=_*v+x*A+M,t[i+2]=h[I],t[i+3]=h[I+1],e[i+4]=p,e[i+5]=g,i+=6}}else{const p=d+(this.alpha*255<<24);for(let f=c;f<l;f+=2)t[i]=a[f],t[i+1]=a[f+1],t[i+2]=h[f],t[i+3]=h[f+1],e[i+4]=p,e[i+5]=r<<16,i+=6}}get vertSize(){return this.vertexSize}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.vertexOffset=this.vertexOffset,t.vertexSize=this.vertexSize,t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0}}const is={build(s,t){let e,i,r,n,o,a;if(s.type==="circle"){const b=s;e=b.x,i=b.y,o=a=b.radius,r=n=0}else if(s.type==="ellipse"){const b=s;e=b.x,i=b.y,o=b.halfWidth,a=b.halfHeight,r=n=0}else{const b=s,M=b.width/2,I=b.height/2;e=b.x+M,i=b.y+I,o=a=Math.max(0,Math.min(b.radius,Math.min(M,I))),r=M-o,n=I-a}if(!(o>=0&&a>=0&&r>=0&&n>=0))return t;const h=Math.ceil(2.3*Math.sqrt(o+a)),c=h*8+(r?4:0)+(n?4:0);if(c===0)return t;if(h===0)return t[0]=t[6]=e+r,t[1]=t[3]=i+n,t[2]=t[4]=e-r,t[5]=t[7]=i-n,t;let l=0,u=h*4+(r?2:0)+2,d=u,p=c,f=r+o,g=n,m=e+f,_=e-f,y=i+g;if(t[l++]=m,t[l++]=y,t[--u]=y,t[--u]=_,n){const b=i-g;t[d++]=_,t[d++]=b,t[--p]=b,t[--p]=m}for(let b=1;b<h;b++){const M=Math.PI/2*(b/h),I=r+Math.cos(M)*o,v=n+Math.sin(M)*a,A=e+I,w=e-I,C=i+v,G=i-v;t[l++]=A,t[l++]=C,t[--u]=C,t[--u]=w,t[d++]=w,t[d++]=G,t[--p]=G,t[--p]=A}f=r,g=n+a,m=e+f,_=e-f,y=i+g;const x=i-g;return t[l++]=m,t[l++]=y,t[--p]=x,t[--p]=m,r&&(t[l++]=_,t[l++]=y,t[--p]=x,t[--p]=_),t},triangulate(s,t,e,i,r,n){if(s.length===0)return;let o=0,a=0;for(let l=0;l<s.length;l+=2)o+=s[l],a+=s[l+1];o/=s.length/2,a/=s.length/2;let h=i;t[h*e]=o,t[h*e+1]=a;const c=h++;for(let l=0;l<s.length;l+=2)t[h*e]=s[l],t[h*e+1]=s[l+1],l>0&&(r[n++]=h,r[n++]=c,r[n++]=h-1),h++;r[n++]=c+1,r[n++]=c,r[n++]=h-1}},fa=1e-4,mi=1e-4;function pa(s){const t=s.length;if(t<6)return 1;let e=0;for(let i=0,r=s[t-2],n=s[t-1];i<t;i+=2){const o=s[i],a=s[i+1];e+=(o-r)*(a+n),r=o,n=a}return e<0?-1:1}function gi(s,t,e,i,r,n,o,a){const h=s-e*r,c=t-i*r,l=s+e*n,u=t+i*n;let d,p;o?(d=i,p=-e):(d=-i,p=e);const f=h+d,g=c+p,m=l+d,_=u+p;return a.push(f,g),a.push(m,_),2}function Mt(s,t,e,i,r,n,o,a){const h=e-s,c=i-t;let l=Math.atan2(h,c),u=Math.atan2(r-s,n-t);a&&l<u?l+=Math.PI*2:!a&&l>u&&(u+=Math.PI*2);let d=l;const p=u-l,f=Math.abs(p),g=Math.sqrt(h*h+c*c),m=(15*f*Math.sqrt(g)/Math.PI>>0)+1,_=p/m;if(d+=_,a){o.push(s,t),o.push(e,i);for(let y=1,x=d;y<m;y++,x+=_)o.push(s,t),o.push(s+Math.sin(x)*g,t+Math.cos(x)*g);o.push(s,t),o.push(r,n)}else{o.push(e,i),o.push(s,t);for(let y=1,x=d;y<m;y++,x+=_)o.push(s+Math.sin(x)*g,t+Math.cos(x)*g),o.push(s,t);o.push(r,n),o.push(s,t)}return m*2}function ma(s,t,e,i,r,n,o,a,h){const c=fa;if(s.length===0)return;const l=t;let u=l.alignment;if(t.alignment!==.5){let R=pa(s);e&&(R*=-1),u=(u-.5)*R+.5}const d=new q(s[0],s[1]),p=new q(s[s.length-2],s[s.length-1]),f=i,g=Math.abs(d.x-p.x)<c&&Math.abs(d.y-p.y)<c;if(f){s=s.slice(),g&&(s.pop(),s.pop(),p.set(s[s.length-2],s[s.length-1]));const R=(d.x+p.x)*.5,yt=(p.y+d.y)*.5;s.unshift(R,yt),s.push(R,yt)}const m=r,_=s.length/2;let y=s.length;const x=m.length/2,b=l.width/2,M=b*b,I=l.miterLimit*l.miterLimit;let v=s[0],A=s[1],w=s[2],C=s[3],G=0,ct=0,T=-(A-C),P=v-w,L=0,N=0,rt=Math.sqrt(T*T+P*P);T/=rt,P/=rt,T*=b,P*=b;const Fs=u,S=(1-Fs)*2,k=Fs*2;f||(l.cap==="round"?y+=Mt(v-T*(S-k)*.5,A-P*(S-k)*.5,v-T*S,A-P*S,v+T*k,A+P*k,m,!0)+2:l.cap==="square"&&(y+=gi(v,A,T,P,S,k,!0,m))),m.push(v-T*S,A-P*S),m.push(v+T*k,A+P*k);for(let R=1;R<_-1;++R){v=s[(R-1)*2],A=s[(R-1)*2+1],w=s[R*2],C=s[R*2+1],G=s[(R+1)*2],ct=s[(R+1)*2+1],T=-(A-C),P=v-w,rt=Math.sqrt(T*T+P*P),T/=rt,P/=rt,T*=b,P*=b,L=-(C-ct),N=w-G,rt=Math.sqrt(L*L+N*N),L/=rt,N/=rt,L*=b,N*=b;const yt=w-v,$t=A-C,Ht=w-G,zt=ct-C,Ds=yt*Ht+$t*zt,le=$t*Ht-zt*yt,Xt=le<0;if(Math.abs(le)<.001*Math.abs(Ds)){m.push(w-T*S,C-P*S),m.push(w+T*k,C+P*k),Ds>=0&&(l.join==="round"?y+=Mt(w,C,w-T*S,C-P*S,w-L*S,C-N*S,m,!1)+4:y+=2,m.push(w-L*k,C-N*k),m.push(w+L*S,C+N*S));continue}const Gs=(-T+v)*(-P+C)-(-T+w)*(-P+A),Ns=(-L+G)*(-N+C)-(-L+w)*(-N+ct),ce=(yt*Ns-Ht*Gs)/le,ue=(zt*Gs-$t*Ns)/le,Oe=(ce-w)*(ce-w)+(ue-C)*(ue-C),wt=w+(ce-w)*S,Ct=C+(ue-C)*S,vt=w-(ce-w)*k,At=C-(ue-C)*k,Ir=Math.min(yt*yt+$t*$t,Ht*Ht+zt*zt),Us=Xt?S:k,Er=Ir+Us*Us*M;Oe<=Er?l.join==="bevel"||Oe/M>I?(Xt?(m.push(wt,Ct),m.push(w+T*k,C+P*k),m.push(wt,Ct),m.push(w+L*k,C+N*k)):(m.push(w-T*S,C-P*S),m.push(vt,At),m.push(w-L*S,C-N*S),m.push(vt,At)),y+=2):l.join==="round"?Xt?(m.push(wt,Ct),m.push(w+T*k,C+P*k),y+=Mt(w,C,w+T*k,C+P*k,w+L*k,C+N*k,m,!0)+4,m.push(wt,Ct),m.push(w+L*k,C+N*k)):(m.push(w-T*S,C-P*S),m.push(vt,At),y+=Mt(w,C,w-T*S,C-P*S,w-L*S,C-N*S,m,!1)+4,m.push(w-L*S,C-N*S),m.push(vt,At)):(m.push(wt,Ct),m.push(vt,At)):(m.push(w-T*S,C-P*S),m.push(w+T*k,C+P*k),l.join==="round"?Xt?y+=Mt(w,C,w+T*k,C+P*k,w+L*k,C+N*k,m,!0)+2:y+=Mt(w,C,w-T*S,C-P*S,w-L*S,C-N*S,m,!1)+2:l.join==="miter"&&Oe/M<=I&&(Xt?(m.push(vt,At),m.push(vt,At)):(m.push(wt,Ct),m.push(wt,Ct)),y+=2),m.push(w-L*S,C-N*S),m.push(w+L*k,C+N*k),y+=2)}v=s[(_-2)*2],A=s[(_-2)*2+1],w=s[(_-1)*2],C=s[(_-1)*2+1],T=-(A-C),P=v-w,rt=Math.sqrt(T*T+P*P),T/=rt,P/=rt,T*=b,P*=b,m.push(w-T*S,C-P*S),m.push(w+T*k,C+P*k),f||(l.cap==="round"?y+=Mt(w-T*(S-k)*.5,C-P*(S-k)*.5,w-T*S,C-P*S,w+T*k,C+P*k,m,!1)+2:l.cap==="square"&&(y+=gi(w,C,T,P,S,k,!1,m)));const kr=mi*mi;for(let R=x;R<y+x-2;++R)v=m[R*2],A=m[R*2+1],w=m[(R+1)*2],C=m[(R+1)*2+1],G=m[(R+2)*2],ct=m[(R+2)*2+1],!(Math.abs(v*(C-ct)+w*(ct-A)+G*(A-C))<kr)&&a.push(R,R+1,R+2)}function vr(s,t,e,i,r,n,o){const a=No(s,t,2);if(!a)return;for(let c=0;c<a.length;c+=3)n[o++]=a[c]+r,n[o++]=a[c+1]+r,n[o++]=a[c+2]+r;let h=r*i;for(let c=0;c<s.length;c+=2)e[h]=s[c],e[h+1]=s[c+1],h+=i}const ga=[],ya={build(s,t){for(let e=0;e<s.points.length;e++)t[e]=s.points[e];return t},triangulate(s,t,e,i,r,n){vr(s,ga,t,e,i,r,n)}},xa={build(s,t){const e=s,i=e.x,r=e.y,n=e.width,o=e.height;return n>=0&&o>=0&&(t[0]=i,t[1]=r,t[2]=i+n,t[3]=r,t[4]=i+n,t[5]=r+o,t[6]=i,t[7]=r+o),t},triangulate(s,t,e,i,r,n){let o=0;i*=e,t[i+o]=s[0],t[i+o+1]=s[1],o+=e,t[i+o]=s[2],t[i+o+1]=s[3],o+=e,t[i+o]=s[6],t[i+o+1]=s[7],o+=e,t[i+o]=s[4],t[i+o+1]=s[5],o+=e;const a=i/e;r[n++]=a,r[n++]=a+1,r[n++]=a+2,r[n++]=a+1,r[n++]=a+3,r[n++]=a+2}},_a={build(s,t){return t[0]=s.x,t[1]=s.y,t[2]=s.x2,t[3]=s.y2,t[4]=s.x3,t[5]=s.y3,t},triangulate(s,t,e,i,r,n){let o=0;i*=e,t[i+o]=s[0],t[i+o+1]=s[1],o+=e,t[i+o]=s[2],t[i+o+1]=s[3],o+=e,t[i+o]=s[4],t[i+o+1]=s[5];const a=i/e;r[n++]=a,r[n++]=a+1,r[n++]=a+2}},Rs={rectangle:xa,polygon:ya,triangle:_a,circle:is,ellipse:is,roundedRectangle:is},ba=new V;function wa(s,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let r=0;r<s.instructions.length;r++){const n=s.instructions[r];if(n.action==="texture")Ca(n.data,i,e);else if(n.action==="fill"||n.action==="stroke"){const o=n.action==="stroke",a=n.data.path.shapePath,h=n.data.style,c=n.data.hole;o&&c&&yi(c.shapePath,h,null,!0,i,e),yi(a,h,c,o,i,e)}}}function Ca(s,t,e){const{vertices:i,uvs:r,indices:n}=e,o=n.length,a=i.length/2,h=[],c=Rs.rectangle,l=ba,u=s.image;l.x=s.dx,l.y=s.dy,l.width=s.dw,l.height=s.dh;const d=s.transform;c.build(l,h),d&&wr(h,d),c.triangulate(h,i,2,a,n,o);const p=u.uvs;r.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);const f=ot.get(Cr);f.indexOffset=o,f.indexSize=n.length-o,f.vertexOffset=a,f.vertexSize=i.length/2-a,f.color=s.style,f.alpha=s.alpha,f.texture=u,f.geometryData=e,t.push(f)}function yi(s,t,e,i,r,n){const{vertices:o,uvs:a,indices:h}=n,c=s.shapePrimitives.length-1;s.shapePrimitives.forEach(({shape:l,transform:u},d)=>{const p=h.length,f=o.length/2,g=[],m=Rs[l.type];if(m.build(l,g),u&&wr(g,u),i){const b=l.closePath??!0;ma(g,t,!1,b,o,2,f,h)}else if(e&&c===d){c!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const b=[],M=g.slice();va(e.shapePath).forEach(v=>{b.push(M.length/2),M.push(...v)}),vr(M,b,o,2,f,h,p)}else m.triangulate(g,o,2,f,h,p);const _=a.length/2,y=t.texture;if(y!==B.WHITE){const b=t.matrix;u&&b.append(u.clone().invert()),la(o,2,f,a,_,2,o.length/2-f,b)}else ca(a,_,2,o.length/2-f);const x=ot.get(Cr);x.indexOffset=p,x.indexSize=h.length-p,x.vertexOffset=f,x.vertexSize=o.length/2-f,x.color=t.color,x.alpha=t.alpha,x.texture=y,x.geometryData=n,r.push(x)})}function va(s){if(!s)return[];const t=s.shapePrimitives,e=[];for(let i=0;i<t.length;i++){const r=t[i].shape,n=[];Rs[r.type].build(r,n),e.push(n)}return e}class Aa{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Ma{constructor(){this.geometry=new ia,this.instructions=new Vi}init(){this.instructions.reset()}}const Bs=class bs{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(t){bs.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??bs.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),wa(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_returnActiveBatchers(){for(let t=0;t<this._activeBatchers.length;t++)ot.return(this._activeBatchers[t]);this._activeBatchers.length=0}_initContextRenderData(t){const e=ot.get(Ma),{batches:i,geometryData:r}=this._gpuContextHash[t.uid],n=r.vertices.length,o=r.indices.length;for(let l=0;l<i.length;l++)i[l].applyTransform=!1;const a=ot.get(ha);this._activeBatchers.push(a),a.ensureAttributeBuffer(n),a.ensureIndexBuffer(o),a.begin();for(let l=0;l<i.length;l++){const u=i[l];a.add(u)}a.finish(e.instructions);const h=e.geometry;h.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),h.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const c=a.batches;for(let l=0;l<c.length;l++){const u=c[l];u.bindGroup=ra(u.textures.textures,u.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new Aa;return this._gpuContextHash[t.uid]=e,t.on("update",this.onGraphicsContextUpdate,this),t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextUpdate(t){this._needsContextNeedsRebuild.push(t)}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("update",this.onGraphicsContextUpdate,this),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(ot.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{ot.return(i)})}destroy(){for(const t of this._needsContextNeedsRebuild)this._gpuContextHash[t.uid]&&this.onGraphicsContextDestroy(t);this._needsContextNeedsRebuild.length=0}};Bs.extension={type:[H.WebGLSystem,H.WebGPUSystem,H.CanvasSystem],name:"graphicsContext"};Bs.defaultOptions={bezierSmoothness:.5};let Ar=Bs;const Sa=8,Ce=11920929e-14,Pa=1;function Mr(s,t,e,i,r,n,o,a,h,c){const u=Math.min(.99,Math.max(0,c??Ar.defaultOptions.bezierSmoothness));let d=(Pa-u)/1;return d*=d,Ta(t,e,i,r,n,o,a,h,s,d),s}function Ta(s,t,e,i,r,n,o,a,h,c){ws(s,t,e,i,r,n,o,a,h,c,0),h.push(o,a)}function ws(s,t,e,i,r,n,o,a,h,c,l){if(l>Sa)return;const u=(s+e)/2,d=(t+i)/2,p=(e+r)/2,f=(i+n)/2,g=(r+o)/2,m=(n+a)/2,_=(u+p)/2,y=(d+f)/2,x=(p+g)/2,b=(f+m)/2,M=(_+x)/2,I=(y+b)/2;if(l>0){let v=o-s,A=a-t;const w=Math.abs((e-o)*A-(i-a)*v),C=Math.abs((r-o)*A-(n-a)*v);if(w>Ce&&C>Ce){if((w+C)*(w+C)<=c*(v*v+A*A)){h.push(M,I);return}}else if(w>Ce){if(w*w<=c*(v*v+A*A)){h.push(M,I);return}}else if(C>Ce){if(C*C<=c*(v*v+A*A)){h.push(M,I);return}}else if(v=M-(s+o)/2,A=I-(t+a)/2,v*v+A*A<=c){h.push(M,I);return}}ws(s,t,u,d,_,y,M,I,h,c,l+1),ws(M,I,x,b,g,m,o,a,h,c,l+1)}const ka=8,Ia=11920929e-14,Ea=1;function Ra(s,t,e,i,r,n,o,a){const c=Math.min(.99,Math.max(0,a??Ar.defaultOptions.bezierSmoothness));let l=(Ea-c)/1;return l*=l,Ba(t,e,i,r,n,o,s,l),s}function Ba(s,t,e,i,r,n,o,a){Cs(o,s,t,e,i,r,n,a,0),o.push(r,n)}function Cs(s,t,e,i,r,n,o,a,h){if(h>ka)return;const c=(t+i)/2,l=(e+r)/2,u=(i+n)/2,d=(r+o)/2,p=(c+u)/2,f=(l+d)/2;let g=n-t,m=o-e;const _=Math.abs((i-n)*m-(r-o)*g);if(_>Ia){if(_*_<=a*(g*g+m*m)){s.push(p,f);return}}else if(g=p-(t+n)/2,m=f-(e+o)/2,g*g+m*m<=a){s.push(p,f);return}Cs(s,t,e,c,l,p,f,a,h+1),Cs(s,p,f,u,d,n,o,a,h+1)}function Sr(s,t,e,i,r,n,o,a){let h=Math.abs(r-n);(!o&&r>n||o&&n>r)&&(h=2*Math.PI-h),a=a||Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI))),a=Math.max(a,3);let c=h/a,l=r;c*=o?-1:1;for(let u=0;u<a+1;u++){const d=Math.cos(l),p=Math.sin(l),f=t+d*i,g=e+p*i;s.push(f,g),l+=c}}function La(s,t,e,i,r,n){const o=s[s.length-2],h=s[s.length-1]-e,c=o-t,l=r-e,u=i-t,d=Math.abs(h*u-c*l);if(d<1e-8||n===0){(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);return}const p=h*h+c*c,f=l*l+u*u,g=h*l+c*u,m=n*Math.sqrt(p)/d,_=n*Math.sqrt(f)/d,y=m*g/p,x=_*g/f,b=m*u+_*c,M=m*l+_*h,I=c*(_+y),v=h*(_+y),A=u*(m+x),w=l*(m+x),C=Math.atan2(v-M,I-b),G=Math.atan2(w-M,A-b);Sr(s,b+t,M+e,n,C,G,c*l>u*h)}const ee=Math.PI*2,rs={centerX:0,centerY:0,ang1:0,ang2:0},ns=({x:s,y:t},e,i,r,n,o,a,h)=>{s*=e,t*=i;const c=r*s-n*t,l=n*s+r*t;return h.x=c+o,h.y=l+a,h};function Fa(s,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,r=Math.cos(s),n=Math.sin(s),o=Math.cos(s+t),a=Math.sin(s+t);return[{x:r-n*i,y:n+r*i},{x:o+a*i,y:a-o*i},{x:o,y:a}]}const xi=(s,t,e,i)=>{const r=s*i-t*e<0?-1:1;let n=s*e+t*i;return n>1&&(n=1),n<-1&&(n=-1),r*Math.acos(n)},Da=(s,t,e,i,r,n,o,a,h,c,l,u,d)=>{const p=Math.pow(r,2),f=Math.pow(n,2),g=Math.pow(l,2),m=Math.pow(u,2);let _=p*f-p*m-f*g;_<0&&(_=0),_/=p*m+f*g,_=Math.sqrt(_)*(o===a?-1:1);const y=_*r/n*u,x=_*-n/r*l,b=c*y-h*x+(s+e)/2,M=h*y+c*x+(t+i)/2,I=(l-y)/r,v=(u-x)/n,A=(-l-y)/r,w=(-u-x)/n,C=xi(1,0,I,v);let G=xi(I,v,A,w);a===0&&G>0&&(G-=ee),a===1&&G<0&&(G+=ee),d.centerX=b,d.centerY=M,d.ang1=C,d.ang2=G};function Ga(s,t,e,i,r,n,o,a=0,h=0,c=0){if(n===0||o===0)return;const l=Math.sin(a*ee/360),u=Math.cos(a*ee/360),d=u*(t-i)/2+l*(e-r)/2,p=-l*(t-i)/2+u*(e-r)/2;if(d===0&&p===0)return;n=Math.abs(n),o=Math.abs(o);const f=Math.pow(d,2)/Math.pow(n,2)+Math.pow(p,2)/Math.pow(o,2);f>1&&(n*=Math.sqrt(f),o*=Math.sqrt(f)),Da(t,e,i,r,n,o,h,c,l,u,d,p,rs);let{ang1:g,ang2:m}=rs;const{centerX:_,centerY:y}=rs;let x=Math.abs(m)/(ee/4);Math.abs(1-x)<1e-7&&(x=1);const b=Math.max(Math.ceil(x),1);m/=b;let M=s[s.length-2],I=s[s.length-1];const v={x:0,y:0};for(let A=0;A<b;A++){const w=Fa(g,m),{x:C,y:G}=ns(w[0],n,o,u,l,_,y,v),{x:ct,y:T}=ns(w[1],n,o,u,l,_,y,v),{x:P,y:L}=ns(w[2],n,o,u,l,_,y,v);Mr(s,M,I,C,G,ct,T,P,L),M=P,I=L,g+=m}}function Na(s,t,e){const i=(o,a)=>{const h=a.x-o.x,c=a.y-o.y,l=Math.sqrt(h*h+c*c),u=h/l,d=c/l;return{len:l,nx:u,ny:d}},r=(o,a)=>{o===0?s.moveTo(a.x,a.y):s.lineTo(a.x,a.y)};let n=t[t.length-1];for(let o=0;o<t.length;o++){const a=t[o%t.length],h=a.radius??e;if(h<=0){r(o,a),n=a;continue}const c=t[(o+1)%t.length],l=i(a,n),u=i(a,c);if(l.len<1e-4||u.len<1e-4){r(o,a),n=a;continue}let d=Math.asin(l.nx*u.ny-l.ny*u.nx),p=1,f=!1;l.nx*u.nx-l.ny*-u.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,p=-1,f=!0):d>0&&(p=-1,f=!0);const g=d/2;let m,_=Math.abs(Math.cos(g)*h/Math.sin(g));_>Math.min(l.len/2,u.len/2)?(_=Math.min(l.len/2,u.len/2),m=Math.abs(_*Math.sin(g)/Math.cos(g))):m=h;const y=a.x+u.nx*_+-u.ny*m*p,x=a.y+u.ny*_+u.nx*m*p,b=Math.atan2(l.ny,l.nx)+Math.PI/2*p,M=Math.atan2(u.ny,u.nx)-Math.PI/2*p;o===0&&s.moveTo(y+Math.cos(b)*m,x+Math.sin(b)*m),s.arc(y,x,m,b,M,f),n=a}}function Ua(s,t,e,i){const r=(a,h)=>Math.sqrt((a.x-h.x)**2+(a.y-h.y)**2),n=(a,h,c)=>({x:a.x+(h.x-a.x)*c,y:a.y+(h.y-a.y)*c}),o=t.length;for(let a=0;a<o;a++){const h=t[(a+1)%o],c=h.radius??e;if(c<=0){a===0?s.moveTo(h.x,h.y):s.lineTo(h.x,h.y);continue}const l=t[a],u=t[(a+2)%o],d=r(l,h);let p;if(d<1e-4)p=h;else{const m=Math.min(d/2,c);p=n(h,l,m/d)}const f=r(u,h);let g;if(f<1e-4)g=h;else{const m=Math.min(f/2,c);g=n(h,u,m/f)}a===0?s.moveTo(p.x,p.y):s.lineTo(p.x,p.y),s.quadraticCurveTo(h.x,h.y,g.x,g.y,i)}}const Oa=new V;class Ya{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new mt,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],n=i[i.length-1];return(r!==t||n!==e)&&i.push(t,e),this}arc(t,e,i,r,n,o){this._ensurePoly(!1);const a=this._currentPoly.points;return Sr(a,t,e,i,r,n,o),this}arcTo(t,e,i,r,n){this._ensurePoly();const o=this._currentPoly.points;return La(o,t,e,i,r,n),this}arcToSvg(t,e,i,r,n,o,a){const h=this._currentPoly.points;return Ga(h,this._currentPoly.lastX,this._currentPoly.lastY,o,a,t,e,i,r,n),this}bezierCurveTo(t,e,i,r,n,o,a){this._ensurePoly();const h=this._currentPoly;return Mr(this._currentPoly.points,h.lastX,h.lastY,t,e,i,r,n,o,a),this}quadraticCurveTo(t,e,i,r,n){this._ensurePoly();const o=this._currentPoly;return Ra(this._currentPoly.points,o.lastX,o.lastY,t,e,i,r,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let i=0;i<t.instructions.length;i++){const r=t.instructions[i];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,n){return this.drawShape(new V(t,e,i,r),n),this}circle(t,e,i,r){return this.drawShape(new ks(t,e,i),r),this}poly(t,e,i){const r=new te(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,n=0,o){r=Math.max(r|0,3);const a=-1*Math.PI/2+n,h=Math.PI*2/r,c=[];for(let l=0;l<r;l++){const u=l*h+a;c.push(t+i*Math.cos(u),e+i*Math.sin(u))}return this.poly(c,!0,o),this}roundPoly(t,e,i,r,n,o=0,a){if(r=Math.max(r|0,3),n<=0)return this.regularPoly(t,e,i,r,o);const h=i*Math.sin(Math.PI/r)-.001;n=Math.min(n,h);const c=-1*Math.PI/2+o,l=Math.PI*2/r,u=(r-2)*Math.PI/r/2;for(let d=0;d<r;d++){const p=d*l+c,f=t+i*Math.cos(p),g=e+i*Math.sin(p),m=p+Math.PI+u,_=p-Math.PI-u,y=f+n*Math.cos(m),x=g+n*Math.sin(m),b=f+n*Math.cos(_),M=g+n*Math.sin(_);d===0?this.moveTo(y,x):this.lineTo(y,x),this.quadraticCurveTo(f,g,b,M,a)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?Ua(this,t,e,r):Na(this,t,e),this.closePath())}filletRect(t,e,i,r,n){if(n===0)return this.rect(t,e,i,r);const o=Math.min(i,r)/2,a=Math.min(o,Math.max(-o,n)),h=t+i,c=e+r,l=a<0?-a:0,u=Math.abs(a);return this.moveTo(t,e+u).arcTo(t+l,e+l,t+u,e,u).lineTo(h-u,e).arcTo(h-l,e+l,h,e+u,u).lineTo(h,c-u).arcTo(h-l,c-l,t+i-u,c,u).lineTo(t+u,c).arcTo(t+l,c-l,t,c-u,u).closePath()}chamferRect(t,e,i,r,n,o){if(n<=0)return this.rect(t,e,i,r);const a=Math.min(n,Math.min(i,r)/2),h=t+i,c=e+r,l=[t+a,e,h-a,e,h,e+a,h,c-a,h-a,c,t+a,c,t,c-a,t,e+a];for(let u=l.length-1;u>=2;u-=2)l[u]===l[u-2]&&l[u-1]===l[u-3]&&l.splice(u-1,2);return this.poly(l,!0,o)}ellipse(t,e,i,r,n){return this.drawShape(new Is(t,e,i,r),n),this}roundRect(t,e,i,r,n,o){return this.drawShape(new Es(t,e,i,r,n),o),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new te,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new te,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,r=e.shape.y;if(!e.transform.isIdentity()){const n=e.transform,o=i;i=n.a*i+n.c*r+n.tx,r=n.b*o+n.d*r+n.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const r=e[i],n=r.shape.getBounds(Oa);r.transform?t.addRect(n,r.transform):t.addRect(n)}return t}}class Rt{constructor(t){this.instructions=[],this.uid=W("graphicsPath"),this._dirty=!0,typeof t=="string"?Zo(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Ya(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,n){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(q.shared);let h=0,c=0;if(!o||o.action!=="bezierCurveTo")h=a.x,c=a.y;else{h=o.data[2],c=o.data[3];const l=a.x,u=a.y;h=l+(l-h),c=u+(u-c)}return this.instructions.push({action:"bezierCurveTo",data:[h,c,t,e,i,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const r=this.instructions[this.instructions.length-1],n=this.getLastPoint(q.shared);let o=0,a=0;if(!r||r.action!=="quadraticCurveTo")o=n.x,a=n.y;else{o=r.data[0],a=r.data[1];const h=n.x,c=n.y;o=h+(h-o),a=c+(c-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,n){return this.instructions.push({action:"rect",data:[t,e,i,r,n]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,n,o,a){n=n||r/2;const h=-1*Math.PI/2+o,c=i*2,l=Math.PI*2/c,u=[];for(let d=0;d<c;d++){const p=d%2?n:r,f=d*l+h;u.push(t+p*Math.cos(f),e+p*Math.sin(f))}return this.poly(u,!0,a),this}clone(t=!1){const e=new Rt;if(!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const r=this.instructions[i];e.instructions.push({action:r.action,data:r.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,r=t.c,n=t.d,o=t.tx,a=t.ty;let h=0,c=0,l=0,u=0,d=0,p=0,f=0,g=0;for(let m=0;m<this.instructions.length;m++){const _=this.instructions[m],y=_.data;switch(_.action){case"moveTo":case"lineTo":h=y[0],c=y[1],y[0]=e*h+r*c+o,y[1]=i*h+n*c+a;break;case"bezierCurveTo":l=y[0],u=y[1],d=y[2],p=y[3],h=y[4],c=y[5],y[0]=e*l+r*u+o,y[1]=i*l+n*u+a,y[2]=e*d+r*p+o,y[3]=i*d+n*p+a,y[4]=e*h+r*c+o,y[5]=i*h+n*c+a;break;case"quadraticCurveTo":l=y[0],u=y[1],h=y[2],c=y[3],y[0]=e*l+r*u+o,y[1]=i*l+n*u+a,y[2]=e*h+r*c+o,y[3]=i*h+n*c+a;break;case"arcToSvg":h=y[5],c=y[6],f=y[0],g=y[1],y[0]=e*f+r*g,y[1]=i*f+n*g,y[5]=e*h+r*c+o,y[6]=i*h+n*c+a;break;case"circle":y[4]=jt(y[3],t);break;case"rect":y[4]=jt(y[4],t);break;case"ellipse":y[8]=jt(y[8],t);break;case"roundRect":y[5]=jt(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=jt(y[2],t);break;default:pt("unknown transform action",_.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function jt(s,t){return s?s.prepend(t):t.clone()}function $a(s,t){if(typeof s=="string"){const i=document.createElement("div");i.innerHTML=s.trim(),s=i.querySelector("svg")}const e={context:t,path:new Rt};return Pr(s,e,null,null),t}function Pr(s,t,e,i){const r=s.children,{fillStyle:n,strokeStyle:o}=Ha(s);n&&e?e={...e,...n}:n&&(e=n),o&&i?i={...i,...o}:o&&(i=o),t.context.fillStyle=e,t.context.strokeStyle=i;let a,h,c,l,u,d,p,f,g,m,_,y,x,b,M,I,v;switch(s.nodeName.toLowerCase()){case"path":b=s.getAttribute("d"),M=new Rt(b),t.context.path(M),e&&t.context.fill(),i&&t.context.stroke();break;case"circle":p=z(s,"cx",0),f=z(s,"cy",0),g=z(s,"r",0),t.context.ellipse(p,f,g,g),e&&t.context.fill(),i&&t.context.stroke();break;case"rect":a=z(s,"x",0),h=z(s,"y",0),I=z(s,"width",0),v=z(s,"height",0),m=z(s,"rx",0),_=z(s,"ry",0),m||_?t.context.roundRect(a,h,I,v,m||_):t.context.rect(a,h,I,v),e&&t.context.fill(),i&&t.context.stroke();break;case"ellipse":p=z(s,"cx",0),f=z(s,"cy",0),m=z(s,"rx",0),_=z(s,"ry",0),t.context.beginPath(),t.context.ellipse(p,f,m,_),e&&t.context.fill(),i&&t.context.stroke();break;case"line":c=z(s,"x1",0),l=z(s,"y1",0),u=z(s,"x2",0),d=z(s,"y2",0),t.context.beginPath(),t.context.moveTo(c,l),t.context.lineTo(u,d),i&&t.context.stroke();break;case"polygon":x=s.getAttribute("points"),y=x.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(y,!0),e&&t.context.fill(),i&&t.context.stroke();break;case"polyline":x=s.getAttribute("points"),y=x.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(y,!1),i&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${s.nodeName}> elements unsupported`);break}}for(let A=0;A<r.length;A++)Pr(r[A],t,e,i)}function z(s,t,e){const i=s.getAttribute(t);return i?Number(i):e}function Ha(s){const t=s.getAttribute("style"),e={},i={};let r=!1,n=!1;if(t){const o=t.split(";");for(let a=0;a<o.length;a++){const h=o[a],[c,l]=h.split(":");switch(c){case"stroke":l!=="none"&&(e.color=tt.shared.setValue(l).toNumber(),n=!0);break;case"stroke-width":e.width=Number(l);break;case"fill":l!=="none"&&(r=!0,i.color=tt.shared.setValue(l).toNumber());break;case"fill-opacity":i.alpha=Number(l);break;case"stroke-opacity":e.alpha=Number(l);break;case"opacity":i.alpha=Number(l),e.alpha=Number(l);break}}}else{const o=s.getAttribute("stroke");o&&o!=="none"&&(n=!0,e.color=tt.shared.setValue(o).toNumber(),e.width=z(s,"stroke-width",1));const a=s.getAttribute("fill");a&&a!=="none"&&(r=!0,i.color=tt.shared.setValue(a).toNumber())}return{strokeStyle:n?e:null,fillStyle:r?i:null}}const Tr=class vs{constructor(t,e,i,r){this.uid=W("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=t,this.y0=e,this.x1=i,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:tt.shared.setValue(e).toHex()}),this}buildLinearGradient(){const t=vs.defaultTextureSize,{gradientStops:e}=this,i=It.get().createCanvas();i.width=t,i.height=t;const r=i.getContext("2d"),n=r.createLinearGradient(0,0,vs.defaultTextureSize,1);for(let g=0;g<e.length;g++){const m=e[g];n.addColorStop(m.offset,m.color)}r.fillStyle=n,r.fillRect(0,0,t,t),this.texture=new B({source:new Ps({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:o,y0:a,x1:h,y1:c}=this,l=new E,u=h-o,d=c-a,p=Math.sqrt(u*u+d*d),f=Math.atan2(d,u);l.translate(-o,-a),l.scale(1/t,1/t),l.rotate(-f),l.scale(256/p,1),this.transform=l}};Tr.defaultTextureSize=256;let za=Tr;const _i={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Xa{constructor(t,e){this.uid=W("fillPattern"),this.transform=new E,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=_i[e].addressModeU,t.source.style.addressModeV=_i[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height)}}function Ft(s,t){var o;if(s==null)return null;let e,i;if(s!=null&&s.fill?(i=s.fill,e={...t,...s}):(i=s,e=t),tt.isColorLike(i)){const a=tt.shared.setValue(i??0);return{...e,color:a.toNumber(),alpha:a.alpha===1?e.alpha:a.alpha,texture:B.WHITE}}else if(i instanceof Xa){const a=i;return{...e,color:16777215,texture:a.texture,matrix:a.transform,fill:e.fill??null}}else if(i instanceof za){const a=i;return a.buildLinearGradient(),{...e,color:16777215,texture:a.texture,matrix:a.transform}}const r={...t,...s};if(r.texture){if(r.texture!==B.WHITE){const h=((o=r.matrix)==null?void 0:o.invert())||new E;h.scale(1/r.texture.frame.width,1/r.texture.frame.height),r.matrix=h}const a=r.texture.source.style;a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat")}const n=tt.shared.setValue(r.color);return r.alpha*=n.alpha,r.color=n.toNumber(),r.matrix=r.matrix?r.matrix.clone():null,r}const Va=new q,bi=new E,Ls=class ht extends gt{constructor(){super(...arguments),this.uid=W("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Rt,this._transform=new E,this._fillStyle={...ht.defaultFillStyle},this._strokeStyle={...ht.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new mt,this._boundsDirty=!0}clone(){const t=new ht;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Ft(t,ht.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Ft(t,ht.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Ft(t,ht.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Ft(t,ht.defaultStrokeStyle),this}texture(t,e,i,r,n,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:n||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?tt.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Rt,this}fill(t,e){let i;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(Y(O,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Ft(t,ht.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(q.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Ft(t,ht.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,r,n,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,i,r,n,o),this}arcTo(t,e,i,r,n){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,n),this}arcToSvg(t,e,i,r,n,o,a){this._tick++;const h=this._transform;return this._activePath.arcToSvg(t,e,i,r,n,h.a*o+h.c*a+h.tx,h.b*o+h.d*a+h.ty),this}bezierCurveTo(t,e,i,r,n,o,a){this._tick++;const h=this._transform;return this._activePath.bezierCurveTo(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,h.a*i+h.c*r+h.tx,h.b*i+h.d*r+h.ty,h.a*n+h.c*o+h.tx,h.b*n+h.d*o+h.ty,a),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,r=this._activePath.instructions,n=i.a*t+i.c*e+i.tx,o=i.b*t+i.d*e+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=n,r[0].data[1]=o,this):(this._activePath.moveTo(n,o),this)}quadraticCurveTo(t,e,i,r,n){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,n),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,n){return this._tick++,this._activePath.roundRect(t,e,i,r,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,n=0,o){return this._tick++,this._activePath.regularPoly(t,e,i,r,n,o),this}roundPoly(t,e,i,r,n,o){return this._tick++,this._activePath.roundPoly(t,e,i,r,n,o),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,n){return this._tick++,this._activePath.filletRect(t,e,i,r,n),this}chamferRect(t,e,i,r,n,o){return this._tick++,this._activePath.chamferRect(t,e,i,r,n,o),this}star(t,e,i,r,n=0,o=0){return this._tick++,this._activePath.star(t,e,i,r,n,o,this._transform.clone()),this}svg(t){return this._tick++,$a(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,n,o){return t instanceof E?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,r,n,o),this)}transform(t,e,i,r,n,o){return t instanceof E?(this._transform.append(t),this):(bi.set(t,e,i,r,n,o),this._transform.append(bi),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],r=i.action;if(r==="fill"){const n=i.data;t.addBounds(n.path.bounds)}else if(r==="texture"){const n=i.data;t.addFrame(n.dx,n.dy,n.dx+n.dw,n.dy+n.dh,n.transform)}if(r==="stroke"){const n=i.data,o=n.style.width/2,a=n.path.bounds;t.addFrame(a.minX-o,a.minY-o,a.maxX+o,a.maxY+o)}}return t}containsPoint(t){var r;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let n=0;n<e.length;n++){const o=e[n],a=o.data,h=a.path;if(!o.action||!h)continue;const c=a.style,l=h.shapePath.shapePrimitives;for(let u=0;u<l.length;u++){const d=l[u].shape;if(!c||!d)continue;const p=l[u].transform,f=p?p.applyInverse(t,Va):t;o.action==="fill"?i=d.contains(f.x,f.y):i=d.strokeContains(f.x,f.y,c.width);const g=a.hole;if(g){const m=(r=g.shapePath)==null?void 0:r.shapePrimitives;if(m)for(let _=0;_<m.length;_++)m[_].shape.contains(f.x,f.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Ls.defaultFillStyle={color:16777215,alpha:1,texture:B.WHITE,matrix:null,fill:null};Ls.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:B.WHITE,matrix:null,fill:null};let Zt=Ls;class Re extends Z{constructor(t){t instanceof Zt&&(t={context:t});const{context:e,roundPixels:i,...r}=t||{};super({label:"Graphics",...r}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,e?this._context=e:this._context=this._ownedContext=new Zt,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Re(this._context.clone()):(this._ownedContext=null,new Re(this._context))}lineStyle(t,e,i){Y(O,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return t&&(r.width=t),e&&(r.color=e),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(t,e){Y(O,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){Y(O,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Zt.defaultStrokeStyle.width||t.color!==Zt.defaultStrokeStyle.color||t.alpha!==Zt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Y(O,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Y(O,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Y(O,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Y(O,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Y(O,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Y(O,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}Bt.add(yn,xn);const Wa=Rt;function qa(s){var e,i;const t=new Map;for(const r of s)t.has(r.start)||t.set(r.start,[]),(e=t.get(r.start))==null||e.push(r.end),t.has(r.end)||t.set(r.end,[]),(i=t.get(r.end))==null||i.push(r.start);return t}function ja(s){var e,i;const t=new Map;for(let r=0;r<s.length;r++){const n=s[r];t.has(n.start)||t.set(n.start,[]),(e=t.get(n.start))==null||e.push(r),t.has(n.end)||t.set(n.end,[]),(i=t.get(n.end))==null||i.push(r)}return t}function Za(s){return s.cornerRadius!==void 0&&s.cornerRadius>0}function Ka(s){return s.strokeCap!==void 0&&s.strokeCap==="ARROW_EQUILATERAL"}function Qa(s,t){var e;return((e=s.get(t))==null?void 0:e.length)===1}function Ja(s,t){var e;return((e=s.get(t))==null?void 0:e.length)===2}function th(s){return s.tangentStart!==void 0&&(s.tangentStart.x!==0||s.tangentStart.y!==0)||s.tangentEnd!==void 0&&(s.tangentEnd.x!==0||s.tangentEnd.y!==0)}function xt(s,t){const e=s.x-t.x,i=s.y-t.y;return Math.sqrt(e*e+i*i)}function eh(s,t,e){const i=xt(s,t),r=xt(t,e),n=xt(s,e),o=(Math.pow(i,2)+Math.pow(n,2)-Math.pow(r,2))/(2*i*r);return Math.acos(o)}const os="_VECTOR_NETWORK_DATA_";function sh(s){return s&&!0}function ih(s){return s&&!0}function rh(s){return s&&!0}function wi(s){return sh(s.vertices)&&ih(s.segments)&&rh(s.regions)}function nh(s,t,e){const i=xt(s,t),r=xt(s,e),{cornerRadius:n}=s,o=i<n*2?i/2:n,a=r<n*2?r/2:n;return Math.min(o,a)}function ve(s,t,e){const i=s.x>t.x?1:-1,r=s.y>t.y?1:-1;return{x:t.x+e*Math.abs(s.x-t.x)*i,y:t.y+e*Math.abs(s.y-t.y)*r}}function oh(s,t,e,i=5){const r=xt(s,t),n=s.x+i*e*(t.x-s.x)/r,o=s.y+i*e*(t.y-s.y)/r;return{x:n,y:o}}function ah(s,t,e){const i=eh(s,t,e),r=nh(s,t,e),n=r/Math.tan(i/2),o=xt(t,s),a=xt(e,s),h=4/3*(1-Math.cos(i/2))/Math.sin(i/2),c=ve(t,s,n/o),l=ve(e,s,n/a),u=ve(c,s,(n-h*r)/n),d=ve(l,s,(n-h*r)/n);return{from:c,to:l,controlFrom:u,controlTo:d}}function hh({start:s,end:t},{tangentStart:e,tangentEnd:i}){return{from:s,to:t,controlFrom:{x:s.x+e.x,y:s.y+e.y},controlTo:{x:t.x+i.x,y:t.y+i.y}}}function lh(s,t,e){const i=[],r={},n=qa(t),o=ja(t);for(let h=0;h<t.length;h++){const c=t[h],l=s.at(c.start),u=s.at(c.end);if(r[h]||(r[h]={start:l,end:u}),Qa(n,c.start)&&Ka(l)){const d=oh(l,u,e);r[h].start=d}else if(Ja(n,c.start)&&Za(l)){const[d,p]=n.get(c.start),f=d===c.end?p:d,g=s.at(f),m=ah(l,g,u);i.push(m);const[_,y]=o.get(c.start),x=_===h?y:_;r[x]||(r[x]={}),r[x].end=m.from,r[h].start=m.to}else if(th(c)){const d=hh({start:l,end:u},c);i.push(d),r[h]={start:l,end:l}}}const a=new Wa;for(const{start:h,end:c}of Object.values(r))a.moveTo(h.x,h.y),a.lineTo(c.x,c.y);for(const{from:h,to:c,controlFrom:l,controlTo:u}of i)a.moveTo(h.x,h.y),a.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y);return a}function ch(){return{width:1,color:"#000000"}}const Ci=20;let uh=class extends gt{constructor(){super();Ye(this,"app");Ye(this,"graphics");this.app=new mr,this.graphics=new Re,this.graphics.x+=Ci,this.graphics.y+=Ci,this.app.stage.addChild(this.graphics)}async mount(e){await this.app.init({antialias:!0,resolution:window.devicePixelRatio,resizeTo:e,canvas:e,background:16777215})}unmount(){this.app.destroy()}updateData(e){this.graphics.clear();const i=lh(e.vertices,e.segments,1);this.graphics.path(i),this.graphics.stroke(ch())}clearData(){this.graphics.clear()}};const Be=new uh;var dh=et('<div class="w-full h-full overflow-auto rounded-md border-2 border-gray-200"><canvas class="w-full h-full">');function fh(){let s;return Mi(()=>{const t=s;Be.mount(t)}),Ur(()=>{Be.unmount()}),(()=>{var t=dh(),e=t.firstChild,i=s;return typeof i=="function"?qr(i,e):s=e,t})()}var ph=et('<div class="w-full h-full flex flex-col gap-2 lg:gap-4"><div class="h-[42px] flex justify-center items-center capitalize text-xl font-medium">Vector Network</div><div class="h-full overflow-hidden rounded-md border-2 border-gray-200 shadow-sm focus-within:border-primary-300 focus-within:ring focus-within:ring-primary-200 focus-within:ring-opacity-50"><textarea class="w-full h-full overflow-auto text-nowrap font-mono p-2 break-keep border-0 focus:border-0 focus:ring-0 resize-none focus-visible:outline-none"rows=6 placeholder="Paste JSON data ...">');function mh(){const[s,t]=Gr(""),e=n=>{t(JSON.stringify(n,void 0,2)),Be.updateData(n)},i=n=>{localStorage.setItem(os,JSON.stringify(n))},r=n=>{const o=n.target,a=JSON.parse(o.value);if(!wi(a)){console.error("[vector] Invalid JSON data."),Be.clearData();return}e(a),i(a)};return Mi(async()=>{const n=localStorage.getItem(os);if(n){const o=JSON.parse(n);if(wi(o)){e(o);return}localStorage.removeItem(os),console.error("[vector] Invalid data",o)}try{const a=await(await fetch("./example.json")).json();e(a)}catch(o){console.error("[vector] Request error",o)}}),(()=>{var n=ph(),o=n.firstChild,a=o.nextSibling,h=a.firstChild;return h.addEventListener("change",r),Ae(h,"spellcheck",!1),Se(()=>h.value=s()),n})()}var gh=et('<div class="sc-container h-full md:h-7/8 py-8"><div class="sc-container-inner h-full px-1 flex flex-col lg:flex-row gap-6"><div class="w-full lg:w-2/3 h-full flex flex-col gap-4"></div><div class="w-full lg:w-1/3">');function yh(){return(()=>{var s=gh(),t=s.firstChild,e=t.firstChild,i=e.nextSibling;return lt(e,st(pn,{}),null),lt(e,st(fh,{}),null),lt(i,st(mh,{})),s})()}var xh=et('<main class="lg:h-screen flex flex-col min-w-sm">');function _h(){return(()=>{var s=xh();return lt(s,st(Jr,{}),null),lt(s,st(yh,{}),null),s})()}const bh=document.getElementById("root");Vr(()=>st(_h,{}),bh);export{sr as $,fr as A,K as B,Z as C,It as D,H as E,Hn as F,so as G,Qe as H,tt as I,Hi as J,Y as K,O as L,yr as M,ta as N,Ot as O,q as P,Ft as Q,V as R,aa as S,ge as T,fs as U,Zt as V,za as W,Xa as X,Ps as Y,Gt as Z,Cr as _,gt as a,ie as a0,oi as a1,Re as a2,In as a3,Ar as a4,ae as b,_o as c,cr as d,Bt as e,ui as f,ra as g,Ji as h,bt as i,E as j,B as k,kn as l,ha as m,vh as n,ia as o,ot as p,Yi as q,Yn as r,mt as s,se as t,W as u,wo as v,pt as w,Uo as x,da as y,ii as z};
